<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>Mortis Play ‚Äî –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç</title>
  <meta name="description" content="–≠–ø–∏—á–Ω—ã–µ –≤–∏–¥–µ–æ, –Ω–æ–≤–æ—Å—Ç–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç Mortis Play. –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è –∫ –≤–∞–π–±—É!" />
  <meta name="robots" content="index,follow" />
  <meta name="keywords" content="Mortis Play, –≥–µ–π–º–∏–Ω–≥, —Å—Ç—Ä–∏–º—ã, YouTube, Telegram" />
  <link rel="icon" href="/images/favicon.ico" />
  <!-- Open Graph -->
  <meta property="og:title" content="Mortis Play ‚Äî –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç" />
  <meta property="og:description" content="–≠–∫—Å–∫–ª—é–∑–∏–≤—ã, –Ω–æ–≤–æ—Å—Ç–∏ –∏ –∫–ª–∏–ø—ã." />
  <meta property="og:image" content="https://mortisplay.ru/assets/og-image.jpg" />
  <meta property="og:url" content="https://mortisplay.ru" />
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="ru_RU" />
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Mortis Play ‚Äî –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç" />
  <meta name="twitter:description" content="–≠–∫—Å–∫–ª—é–∑–∏–≤—ã, –Ω–æ–≤–æ—Å—Ç–∏ –∏ –∫–ª–∏–ø—ã." />
  <meta name="twitter:image" content="https://mortisplay.ru/assets/twitter-image.jpg" />
  <!-- Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-W7QBLDDSSK"></script>
  <script>
    const nonce = crypto.getRandomValues(new Uint8Array(16)).reduce((s, b) => s + b.toString(16).padStart(2, '0'), '');
    const script = document.createElement('script');
    script.nonce = nonce;
    script.id = 'gtagScript';
    script.innerHTML = `window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-W7QBLDDSSK', { send_page_view: true });`;
    document.head.appendChild(script);
  </script>
  <script src="https://cdn.tailwindcss.com" defer></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">
  <style>
    /* === –û–°–ù–û–í–ù–û–ô –î–ò–ó–ê–ô–ù === */
    body {
      background: linear-gradient(135deg, #0a1f3a 0%, #1a3a5f 50%, #2c5282 100%);
      color: #e0d6ff;
      font-family: 'Inter', 'Segoe UI', sans-serif;
      overflow-y: auto;
      position: relative;
      min-height: 100vh;
    }
    body::before {
      content: '';
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="3"/><feColorMatrix type="saturate" values="0"/></filter><rect width="100" height="100" filter="url(%23n)" opacity="0.08"/></svg>') repeat;
      pointer-events: none;
      z-index: -1;
    }
    /* === –ì–õ–ê–°–° –ö–ê–†–¢–û–ß–ö–ò === */
    .glass-card {
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border-radius: 1.5rem;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      transition: all 0.4s ease;
      position: relative;
      overflow: hidden;
    }
    .glass-card::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: linear-gradient(135deg, rgba(255,255,255,0.1), transparent);
      opacity: 0;
      transition: opacity 0.4s ease;
      pointer-events: none;
    }
    .glass-card:hover::before { opacity: 1; }
    .glass-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      border-color: rgba(167, 139, 250, 0.4);
    }
    /* === –ù–ï–û–ù–û–í–´–ô –ó–ê–ì–û–õ–û–í–û–ö === */
    .neon-title {
      font-weight: 900;
      background: linear-gradient(90deg, #c084fc, #a78bfa, #ddd6fe, #a78bfa, #c084fc);
      background-size: 200% 100%;
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      animation: neonFlow 4s ease-in-out infinite;
      letter-spacing: -1px;
    }
    @keyframes neonFlow {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    /* === TIMELINE === */
    .timeline-container {
      position: relative;
      padding-left: 2rem;
    }
    .timeline-container::before {
      content: '';
      position: absolute;
      left: 0.75rem;
      top: 0;
      bottom: 0;
      width: 2px;
      background: linear-gradient(to bottom, #a78bfa, #c084fc);
      border-radius: 1px;
    }
    .timeline-item {
      position: relative;
      margin-bottom: 2rem;
      padding-left: 1.5rem;
    }
    .timeline-item::before {
      content: '';
      position: absolute;
      left: -0.75rem;
      top: 0.5rem;
      width: 16px;
      height: 16px;
      background: #a78bfa;
      border: 3px solid #1a0033;
      border-radius: 50%;
      box-shadow: 0 0 15px rgba(167, 139, 250, 0.6);
      transition: all 0.3s ease;
    }
    .timeline-item:hover::before {
      transform: scale(1.3);
      box-shadow: 0 0 25px rgba(167, 139, 250, 0.8);
    }
    /* === –ö–ù–û–ü–ö–ò === */
    .neon-btn {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(167, 139, 250, 0.4);
      color: #e0d6ff;
      padding: 0.75rem 1.5rem;
      border-radius: 9999px;
      font-weight: 600;
      transition: all 0.4s ease;
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(8px);
    }
    .neon-btn::before {
      content: '';
      position: absolute;
      top: 0; left: -100%;
      width: 100%; height: 100%;
      background: linear-gradient(90deg, transparent, rgba(167, 139, 250, 0.3), transparent);
      transition: 0.6s;
    }
    .neon-btn:hover::before { left: 100%; }
    .neon-btn:hover {
      background: rgba(167, 139, 250, 0.2);
      border-color: #c084fc;
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(167, 139, 250, 0.3);
    }
    
    /* –ù–µ–∞–∫—Ç–∏–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞ */
    .neon-btn.inactive {
      opacity: 0.5;
      cursor: not-allowed;
      pointer-events: none;
    }
    .neon-btn.inactive:hover {
      background: rgba(255, 255, 255, 0.1);
      border-color: rgba(167, 139, 250, 0.4);
      transform: none;
      box-shadow: none;
    }
    
    /* === –ê–î–ê–ü–¢–ê–¶–ò–Ø === */
    @media (max-width: 640px) {
      .glass-card { padding: 1.5rem; border-radius: 1rem; }
      .neon-title { font-size: 2.5rem !important; }
      .timeline-container { padding-left: 1.5rem; }
      .timeline-item::before { left: -0.6rem; }
    }
    @media (max-width: 480px) {
      .neon-btn { padding: 0.6rem 1.2rem; font-size: 0.875rem; }
    }
    /* === –ê–ù–ò–ú–ê–¶–ò–Ø –ü–û–Ø–í–õ–ï–ù–ò–Ø === */
    .fade-in {
      opacity: 0;
      transform: translateY(30px);
      transition: all 0.8s cubic-bezier(0.25, 0.8, 0.25, 1);
    }
    .fade-in.visible { opacity: 1; transform: translateY(0); }
    /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å—Ç–∏–ª–µ–π –≥–ª–∞–≤–Ω–æ–π –ø–æ–¥ –Ω–æ–≤—ã–π –¥–∏–∑–∞–π–Ω */
    @keyframes floaty { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-4px)} }
    @keyframes badgePop { 0% { transform: scale(0); opacity: 0; } 80% { transform: scale(1.1); opacity: 1; } 100% { transform: scale(1); opacity: 1; } }
    @keyframes modalFadeIn { 0% { opacity: 0; transform: scale(0.95); } 100% { opacity: 1; transform: scale(1); } }
    @keyframes modalFadeOut { 0% { opacity: 1; transform: scale(1); } 100% { opacity: 0; transform: scale(0.95); } }
    .card-hover { transition: transform .25s ease, box-shadow .25s ease; }
    .card-hover:hover { transform: translateY(-4px); box-shadow: 0 12px 24px rgb(0 0 0 / .15), 0 0 12px rgba(147, 51, 234, 0.5); }
    .dark .card-hover:hover { box-shadow: 0 12px 24px rgb(0 0 0 / .3), 0 0 12px rgba(99, 102, 241, 0.6); }
    .fade-in { opacity: 0; transform: translateY(16px); transition: opacity .6s ease, transform .6s ease; }
    .fade-in.is-visible { opacity: 1; transform: none; }
    .glass { backdrop-filter: saturate(160%) blur(8px); background: linear-gradient(180deg, rgb(255 255 255 / .7), rgb(255 255 255 / .55)); }
    .dark .glass { background: linear-gradient(180deg, rgb(17 24 39 / .7), rgb(17 24 39 / .55)); }
    #loader { position: fixed; inset: 0; z-index: 1000; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #6366f1, #ec4899); }
    .loader-spin { width: 64px; height: 64px; border: 6px solid rgba(255,255,255,.3); border-top-color: #fff; border-radius: 50%; animation: spin 1s linear infinite; }
    @keyframes spin { 100% { transform: rotate(360deg); } }
    #sidebarMenu { box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1); transform: translateX(-100%); transition: transform 0.3s ease-in-out; }
    #sidebarMenu.open { transform: translateX(0); }
    #themeToggle { position: relative; overflow: hidden; background: linear-gradient(45deg, #facc15, #fef08a); border-radius: 0.75rem; padding: 0.5rem; color: #1f2937; }
    .dark #themeToggle { background: linear-gradient(45deg, #1e3a8a, #3b82f6); color: #e5e7eb; }
    #themeToggle::before { content: ''; position: absolute; top: 50%; left: 50%; width: 0; height: 0; background: rgba(255, 255, 255, 0.4); border-radius: 50%; transform: translate(-50%, -50%); transition: width 0.5s ease, height 0.5s ease; }
    #themeToggle:hover::before { width: 200%; height: 200%; }
    #themeToggle i { transition: transform 0.5s ease, opacity 0.5s ease; position: relative; z-index: 1; }
    #themeToggle:hover i { transform: rotate(180deg); opacity: 0.8; }
    #themeToggle .glow { position: absolute; inset: 0; box-shadow: 0 0 12px rgba(255, 255, 255, 0.6); opacity: 0; transition: opacity 0.3s ease; }
    #themeToggle:hover .glow { opacity: 1; }
    .dark #themeToggle .glow { box-shadow: 0 0 12px rgba(99, 102, 241, 0.6); }
    .particle { position: absolute; width: 4px; height: 4px; background: #1f2937; border-radius: 50%; pointer-events: none; z-index: 2; }
    .dark .particle { background: #e5e7eb; }
    .pagination-button { transition: all 0.3s ease; }
    .pagination-button:hover { transform: scale(1.05); }
    .pagination-button:disabled { opacity: 0.5; cursor: not-allowed; }
    .notification { transition: opacity 0.5s ease, transform 0.5s ease; animation: slideIn 0.5s ease forwards, fadeOut 5s ease 3s forwards; position: fixed; bottom: 1rem; right: 1rem; z-index: 1000; max-width: 320px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); }
    .notification.show { opacity: 1; transform: translateY(0); font-weight: bold; display: flex; align-items: center; gap: 1rem; }
    @keyframes slideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes fadeOut { 0% { opacity: 1; } 80% { opacity: 1; } 100% { opacity: 0; } }
    body { overscroll-behavior: none; }
    main { overflow: auto; min-height: 100vh; }
    .low-performance .card-hover { transition: none; }
    .low-performance .card-hover:hover { transform: none; box-shadow: none; }
    .low-performance .fade-in { transition: none; opacity: 1; transform: none; }
    .low-performance .animate-[floaty_5s_ease-in-out_infinite] { animation: none; }
    .banner-fallback { display: none; }
    .low-performance .banner-fallback { display: block; }
    .no-animations .fade-in, .no-animations .card-hover, .no-animations .animate-[floaty_5s_ease-in-out_infinite], .no-animations .bg-particles {
      transition: none;
      transform: none;
      opacity: 1;
      animation: none;
    }
    :root { --font-scale: 1; }
    body { font-size: calc(1rem * var(--font-scale)); }
    .text-3xl { font-size: calc(1.875rem * var(--font-scale)); }
    .text-2xl { font-size: calc(1.5rem * var(--font-scale)); }
    .text-sm { font-size: calc(0.875rem * var(--font-scale)); }
    .high-contrast {
      --text-color: #000000;
      --bg-color: #ffffff;
      --link-color: #0000ff;
    }
    .high-contrast.dark {
      --text-color: #ffffff;
      --bg-color: #000000;
      --link-color: #00ff00;
    }
    .high-contrast body {
      background: var(--bg-color);
      color: var(--text-color);
    }
    .high-contrast a {
      color: var(--link-color);
      text-decoration: underline;
    }
    .high-contrast .bg-gradient-to-br,
    .high-contrast .glass,
    .high-contrast .glass-button {
      background: var(--bg-color);
      backdrop-filter: none;
      border: 2px solid var(--text-color);
      color: var(--text-color);
    }
    .high-contrast .card-hover {
      background: var(--bg-color);
      border: 2px solid var(--text-color);
      color: var(--text-color);
    }
    .high-contrast .bg-gradient-to-r {
      background: var(--bg-color);
      color: var(--text-color);
    }
    .high-contrast .text-transparent {
      color: var(--text-color);
    }
    .high-contrast .ring-1 {
      border: 2px solid var(--text-color);
    }
    .high-contrast .notification {
      background: var(--bg-color);
      color: var(--text-color);
      border: 2px solid var(--text-color);
    }
    .high-contrast .notification button {
      color: var(--text-color);
      border: 1px solid var(--text-color);
      padding: 0.2rem;
      border-radius: 0.25rem;
    }
    .high-contrast #highContrastToggle {
      border: 2px solid var(--text-color);
      width: 1.5rem;
      height: 1.5rem;
    }
    .high-contrast #highContrastToggle:checked {
      background-color: var(--text-color);
      border-color: var(--bg-color);
    }
    .glass-button {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 0.75rem;
      color: #ffffff;
      font-weight: 600;
      padding: 0.5rem 1rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);
      transition: all 0.3s ease;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }
    .glass-button:hover {
      background: rgba(255, 255, 255, 0.25);
      transform: scale(1.05);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .glass-button:active {
      transform: scale(0.95);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .glass-button:focus {
      outline: none;
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3);
    }
    .dark .glass-button {
      background: rgba(50, 50, 50, 0.15);
      border-color: rgba(200, 200, 200, 0.2);
      color: #e5e7eb;
    }
    .dark .glass-button:hover {
      background: rgba(50, 50, 50, 0.25);
    }
    .dark .glass-button:active {
      transform: scale(0.95);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .dark .glass-button:focus {
      outline: none;
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.5);
    }
    @supports not (backdrop-filter: blur(10px)) {
      .glass-button { background: rgba(255, 255, 255, 0.5); box-shadow: none; }
      .dark .glass-button { background: rgba(50, 50, 50, 0.5); }
      #settings, #news { background: rgba(255, 255, 255, 0.2); }
      .dark #settings, .dark #news { background: rgba(17, 24, 39, 0.4); }
    }
    .notification {
      display: none;
      background: rgba(255, 255, 255, 0.9);
      color: #1f2937;
      border: 1px solid rgba(0, 0, 0, 0.2);
      border-radius: 0.5rem;
      padding: 0.75rem 1rem;
      margin-top: 1rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      position: relative;
      transition: opacity 0.3s ease, transform 0.3s ease;
    }
    .notification.show {
      display: flex;
      align-items: center;
      gap: 1rem;
      opacity: 1;
      transform: translateY(0);
    }
    .dark .notification {
      background: rgba(17, 24, 39, 0.9);
      color: #e5e7eb;
      border-color: rgba(255, 255, 255, 0.2);
    }
    .notification button {
      background: none;
      border: none;
      color: #1f2937;
      cursor: pointer;
      font-size: 1rem;
      padding: 0.25rem;
      transition: color 0.3s ease;
    }
    .dark .notification button {
      color: #e5e7eb;
    }
    .notification button:hover {
      color: #6366f1;
    }
    .dark .notification button:hover {
      color: #a5b4fc;
    }
    #settings .notification {
      position: fixed;
      bottom: 1rem;
      right: 1rem;
      margin-top: 0;
      z-index: 1000;
      max-width: 320px;
    }
    #settings .notification.show {
      opacity: 1;
      transform: translateY(0);
    }
    .top-notification {
      position: fixed;
      top: 1rem;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1000;
      max-width: 320px;
    }
    .bg-gradient-to-br {
      background-image: linear-gradient(to bottom right, #fef3c7, #f5f3ff, #dbeafe);
    }
    .dark .bg-gradient-to-br {
      background-image: linear-gradient(to bottom right, #1e1b4b, #312e81, #4c1d95);
    }
    h2, h3 {
      color: #4f46e5;
      background: none;
      -webkit-background-clip: none;
      background-clip: none;
    }
    .dark h2, .dark h3 {
      color: #a5b4fc;
      background: none;
    }
    .high-contrast h2, .high-contrast h3 {
      color: var(--text-color);
      background: none;
    }
    article.card-hover {
      background: linear-gradient(to right, #4f46e5, #9333ea);
      color: #ffffff;
      transition: all 0.3s ease;
    }
    article.card-hover:hover {
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2), 0 0 12px rgba(147, 51, 234, 0.5);
      transform: translateY(-4px);
    }
    .dark article.card-hover {
      background: linear-gradient(to right, #6366f1, #f472b6);
      color: #e5e7eb;
    }
    .dark article.card-hover:hover {
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3), 0 0 12px rgba(99, 102, 241, 0.6);
    }
    .high-contrast article.card-hover {
      background: var(--bg-color);
      color: var(--text-color);
      box-shadow: none;
      border: 2px solid var(--text-color);
    }
    #settings, #news, #contact, #profile {
      position: relative;
      background: rgba(255, 255, 255, 0.2);
      color: #1f2937;
    }
    .dark #settings, .dark #news, .dark #contact, .dark #profile {
      background: rgba(17, 24, 39, 0.4);
      color: #e5e7eb;
    }
    .high-contrast #settings, .high-contrast #news, .high-contrast #contact, .high-contrast #profile {
      background: var(--bg-color);
      color: var(--text-color);
    }
    .badge { animation: badgePop 0.5s ease forwards; border: 1px solid rgba(255, 255, 255, 0.3); font-size: 0.875rem; padding: 0.4rem 0.8rem; position: relative; }
    .badge.common { background: linear-gradient(to right, #4f46e5, #9333ea); }
    .badge.rare { background: linear-gradient(to right, #0ea5e9, #3b82f6); box-shadow: 0 0 8px rgba(59, 130, 246, 0.5); }
    .badge.legendary { background: linear-gradient(to right, #f59e0b, #eab308); box-shadow: 0 0 12px rgba(234, 179, 8, 0.7); animation: badgePop 0.5s ease forwards; }
    @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
    .badge.epic { background: linear-gradient(to right, #7c3aed, #a855f7); box-shadow: 0 0 12px rgba(124, 58, 237, 0.6); animation: badgePop 0.5s ease forwards; }
    .badge.secret { background: linear-gradient(to right, #a855f7, #d946ef); box-shadow: 0 0 16px rgba(168, 85, 247, 0.8); }
    .badge.secret canvas { position: absolute; top: -10px; left: -10px; width: calc(100% + 20px); height: calc(100% + 20px); pointer-events: none; }
    .badge.code-breaker { background: linear-gradient(to right, #22c55e, #15803d); box-shadow: 0 0 12px rgba(34, 197, 94, 0.7); font-family: monospace; text-shadow: 0 0 5px #22c55e; position: relative; overflow: hidden; }
    @keyframes glitch { 0% { left: -100%; } 100% { left: 100%; } }
    .badge.night-stalker { background: linear-gradient(to right, #1f2937, #374151); box-shadow: 0 0 12px rgba(31, 41, 55, 0.7); font-family: monospace; text-shadow: 0 0 5px #4b5563; position: relative; overflow: hidden; }
    .badge.ghost { background: linear-gradient(to right, #6b7280, #4b5563); opacity: 0.7; box-shadow: 0 0 12px rgba(107, 114, 128, 0.5); }
    .badge.ghost canvas { position: absolute; top: -10px; left: -10px; width: calc(100% + 20px); height: calc(100% + 20px); pointer-events: none; }
    .badge.dark-prince { background: linear-gradient(to right, #1e293b, #334155); box-shadow: 0 0 16px rgba(30, 41, 59, 0.8); position: relative; overflow: hidden; }
    .encrypted-text { filter: blur(3px); transition: filter 0.3s ease; }
    .encrypted-text:hover { filter: blur(0); }
    @media (max-width: 640px) {
  .banner-video-container {
    align-items: center;
  }
  .banner-quote {
    position: static !important;
    margin-top: 1.5rem !important;
    width: 100% !important;
    max-width: none !important;
  }
}
    /* –°–≤–µ—á–µ–Ω–∏–µ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –±–µ–π–¥–∂–∏–∫ */
.badge {
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden !important;
  will-change: transform, box-shadow;
  border-radius: 9999px;
}
.badge::before {
  content: '';
  position: absolute;
  inset: -2px;
  border-radius: 9999px;
  padding: 2px;
  background: conic-gradient(from 0deg, #a855f7, #ec4899, #3b82f6, #22d3ee, #a855f7);
  mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
  mask-composite: exclude;
  opacity: 0;
  transition: opacity 0.4s ease;
  z-index: -1;
  pointer-events: none;
}
.badge:hover::before {
  opacity: 1;
}
.badge:hover {
  transform: translateY(-2px) scale(1.05);
  box-shadow: 0 8px 20px rgba(147, 51, 234, 0.4), 0 0 20px rgba(147, 51, 234, 0.3);
  z-index: 10;
}
    .badge:hover canvas {
  filter: drop-shadow(0 0 8px currentColor);
}
/* –ü—É–ª—å—Å–∞—Ü–∏—è –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –±–µ–π–¥–∂–∞ */
@keyframes badgePulseGlow {
  0%, 100% { box-shadow: 0 0 0 0 rgba(147, 51, 234, 0.7); }
  50% { box-shadow: 0 0 0 12px rgba(147, 51, 234, 0); }
}
.badge.new-badge {
  animation: badgePulseGlow 1.5s ease-out 3;
}
/* –í—Ä–∞—â–µ–Ω–∏–µ –∫–æ—Ä–æ–Ω—ã –¥–ª—è –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã—Ö –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ */
@keyframes crownRotate {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
.badge.legendary.new-badge i.fa-crown {
  animation: crownRotate 2s linear infinite;
}
    @media (max-width: 640px) {
      .glass-button {
        padding: 0.4rem 0.8rem;
        font-size: calc(0.85rem * var(--font-scale));
        gap: 0.4rem;
      }
      .mt-6 {
        margin-top: 1.5rem;
      }
      #contact .flex-wrap, #welcome .flex-wrap {
        gap: 0.75rem;
      }
      #welcome .lg:grid-cols-2 { grid-template-columns: 1fr; }
      #welcome video, #welcome .banner-fallback { max-width: 100%; height: auto; }
      #welcome .mt-4.lg\:absolute { position: static; margin-top: 1rem; width: 100%; }
      #menuToggle { padding: 0.5rem 0.75rem; font-size: 1rem; }
      .glass { backdrop-filter: none; background: linear-gradient(180deg, rgb(255 255 255 / .9), rgb(255 255 255 / .8)); }
      .dark .glass { background: linear-gradient(180deg, rgb(17 24 39 / .9), rgb(17 24 39 / .8)); }
      .card-hover:hover { transform: none; }
      .animate-[floaty_5s_ease-in-out_infinite] { animation: none; }
      iframe, video, img { max-width: 100%; height: auto; }
      #settings .notification { max-width: 80%; right: 0.5rem; bottom: 0.5rem; }
    }
    @media (min-width: 1024px) {
      header { position: sticky; top: 0; z-index: 50; background: white/80 dark:bg-slate-900/80; }
      nav { height: 4rem; }
      nav a { padding: 0.75rem 1rem; }
      nav a:hover { background: slate-100 dark:bg-slate-800; }
    }
    .bg-particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      pointer-events: none;
    }
    .no-particles .bg-particles {
      display: none;
    }
    .badge {
  overflow: hidden !important; /* –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–µ–∑–∫–∞ */
  position: relative;
  will-change: transform; /* GPU */
  border-radius: 9999px;
}
.badge canvas {
  border-radius: 9999px;
  will-change: contents;
}
    body {
      color: #1f2937;
      background: linear-gradient(to bottom right, #fef3c7, #f5f3ff, #dbeafe);
    }
    .dark body {
      color: #e5e7eb;
      background: linear-gradient(to bottom right, #0a1f3a, #1a3a5f, #2c5282);
    }
    .text-slate-600 { color: #4b5563; }
    .dark .text-slate-600 { color: #9ca3af; }
    .text-slate-700 { color: #374151; }
    .dark .text-slate-700 { color: #d1d5db; }
    .text-slate-800 { color: #1f2937; }
    .dark .text-slate-800 { color: #e5e7eb; }
    .text-indigo-600 { color: #4f46e5; }
    .dark .text-indigo-600 { color: #a5b4fc; }
    .text-indigo-400 { color: #818cf8; }
    .dark .text-indigo-400 { color: #c7d2fe; }
    .bg-white { background-color: #ffffff; }
    .dark .bg-white { background-color: #1f2937; }
    .bg-slate-50 { background-color: #f8fafc; }
    .dark .bg-slate-50 { background-color: #111827; }
    .bg-slate-800 { background-color: #1f2937; }
    .dark .bg-slate-800 { background-color: #374151; }
    .ring-slate-200 { border-color: #e5e7eb; }
    .dark .ring-slate-200 { border-color: #4b5563; }
    .ring-slate-700 { border-color: #374151; }
    .dark .ring-slate-700 { border-color: #9ca3af; }
    /* –§–∏–∫—Å –¥–ª—è —Ü–∏—Ç–∞—Ç—ã –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
    @media (max-width: 768px) {
      .banner-quote {
        position: static !important;
        margin-top: 1.5rem;
        width: 100% !important;
        max-width: none !important;
        right: auto;
        bottom: auto;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .banner-video-container {
        overflow: hidden;
      }
    }
  </style>
</head>
<body class="min-h-screen text-slate-800 dark:text-slate-100 selection:bg-indigo-200 selection:text-slate-900">
  <canvas id="backgroundParticles" class="bg-particles"></canvas>
  <div id="loader"><div class="loader-spin" aria-label="–ó–∞–≥—Ä—É–∑–∫–∞ —Å–∞–π—Ç–∞"></div></div>
  <div id="slowLoadWarning" class="notification hidden">
    <span>‚ö†Ô∏è –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–æ–ª—å—à–µ –æ–±—ã—á–Ω–æ–≥–æ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –∏–ª–∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.</span>
    <button aria-label="–ó–∞–∫—Ä—ã—Ç—å"><i class="fa-solid fa-xmark"></i></button>
  </div>
  <div id="siteContent" class="hidden">
    <header class="sticky top-0 z-50 border-b border-slate-200/60 dark:border-slate-700/60 bg-white/80 dark:bg-slate-900/80 glass">
      <nav class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between relative" aria-label="–ì–ª–∞–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è">
        <div class="flex items-center gap-2">
          <button id="menuToggle" class="inline-flex sm:hidden items-center gap-2 rounded-xl px-3 py-2 text-sm font-medium ring-1 ring-slate-300/70 dark:ring-slate-600" aria-controls="sidebarMenu" aria-expanded="false">
            <span>–ú–µ–Ω—é</span>
            <i class="fa-solid fa-bars"></i>
          </button>
          <a href="#welcome" class="flex items-center gap-2 font-semibold tracking-tight text-slate-900 dark:text-white">
            <img src="/assets/photo.jpg" alt="Mortis Play Logo" class="h-8 w-8 rounded-lg object-cover" onerror="this.src='/assets/fallback.jpg';">
            <span class="hidden sm:inline">Mortis Play</span>
          </a>
        </div>
        <div class="hidden sm:flex items-center gap-2">
          <a class="px-3 py-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800" href="#welcome">–ì–ª–∞–≤–Ω–∞—è</a>
          <a class="px-3 py-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800" href="#video">–í–∏–¥–µ–æ</a>
          <a class="px-3 py-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800" href="#news">–ù–æ–≤–æ—Å—Ç–∏</a>
          <a class="px-3 py-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800" href="#contact">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
          <a class="px-3 py-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800" href="#profile">–ü—Ä–æ—Ñ–∏–ª—å</a>
          <a class="px-3 py-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800" href="#settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
        </div>
        <div class="flex items-center gap-2">
          <button id="themeToggle" class="glass-button relative flex items-center gap-1" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
            <i class="fa-solid fa-sun"></i>
            <span class="text-xs hidden sm:inline">–°–≤–µ—Ç–ª–∞—è</span>
            <div class="glow"></div>
            <canvas id="particleCanvas" class="absolute inset-0 pointer-events-none"></canvas>
          </button>
        </div>
      </nav>
      <div id="sidebarMenu" class="fixed top-0 left-0 h-full w-64 bg-white dark:bg-slate-900 transform -translate-x-full transition-transform duration-300 ease-in-out z-50 sm:hidden glass">
        <div class="p-4">
          <button id="closeMenu" class="absolute top-4 right-4 text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white">
            <i class="fa-solid fa-xmark"></i>
          </button>
          <div class="flex items-center gap-2 mb-6">
            <img src="/assets/photo.jpg" alt="Mortis Play Logo" class="h-8 w-8 rounded-lg object-cover" onerror="this.src='/assets/fallback.jpg';">
            <span class="font-semibold tracking-tight text-slate-900 dark:text-white">Mortis Play</span>
          </div>
          <nav class="space-y-2">
            <a class="block px-3 py-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800" href="#welcome">–ì–ª–∞–≤–Ω–∞—è</a>
            <a class="block px-3 py-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800" href="#video">–í–∏–¥–µ–æ</a>
            <a class="block px-3 py-2 rounded-lg hover:bg-slice-100 dark:hover:bg-slate-800" href="#news">–ù–æ–≤–æ—Å—Ç–∏</a>
            <a class="block px-3 py-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800" href="#contact">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
            <a class="block px-3 py-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800" href="#profile">–ü—Ä–æ—Ñ–∏–ª—å</a>
            <a class="block px-3 py-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800" href="#settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
          </nav>
        </div>
      </div>
    </header>
    <main>
      <section id="welcome" class="relative min-h-screen flex items-center justify-center overflow-hidden">
  <!-- –§–æ–Ω–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <div class="absolute top-10 left-10 w-96 h-96 bg-purple-600/20 rounded-full blur-3xl animate-pulse"></div>
    <div class="absolute bottom-20 right-10 w-80 h-80 bg-indigo-600/20 rounded-full blur-3xl animate-pulse delay-1000"></div>
    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full bg-gradient-radial from-purple-900/30 to-transparent blur-3xl"></div>
  </div>
  <div class="mx-auto max-w-4xl px-4 py-20 relative z-10">
    <div class="glass-card p-8 fade-in">
      <h1 class="neon-title text-5xl md:text-7xl font-extrabold text-center mb-16 drop-shadow-2xl">
        –ô–æ—É, —ç—Ç–æ Mortis Play!
      </h1>
      <p class="text-lg leading-relaxed text-gray-200 mb-6">
        –≠–ø–∏—á–Ω—ã–µ –≤–∏–¥–µ–æ, –Ω–æ–≤–æ—Å—Ç–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç Mortis Play. –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è –∫ –≤–∞–π–±—É! üòé
      </p>
      <!-- –ö–Ω–æ–ø–∫–∏ -->
<div class="flex flex-wrap justify-center gap-3 mb-6">
  <a href="#contact" class="neon-btn flex items-center gap-2">
    <i class="fa-solid fa-envelope"></i> –ö–æ–Ω—Ç–∞–∫—Ç—ã
  </a>
  <a href="biography.html" class="neon-btn flex items-center gap-2">
    <i class="fa-solid fa-user"></i> –ë–∏–æ–≥—Ä–∞—Ñ–∏—è
  </a>
  <a href="qa.html" class="neon-btn flex items-center gap-2">
    <i class="fa-solid fa-question-circle"></i> –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å
  </a>
  <a href="faq.html" class="neon-btn flex items-center gap-2">
    <i class="fa-solid fa-circle-question"></i> FAQ
  </a>
  <a href="/games/" class="neon-btn flex items-center gap-2">
    <i class="fa-solid fa-gamepad"></i> –ò–≥—Ä—ã
  </a>
  <!-- –ù–ï–ê–ö–¢–ò–í–ù–ê–Ø –ö–ù–û–ü–ö–ê "–ò–¢–û–ì–ò –ì–û–î–ê" -->
  <button class="neon-btn inactive flex items-center gap-2">
    <i class="fa-solid fa-calendar-days"></i> –ò—Ç–æ–≥–∏ –ì–û–î–ê
  </button>
</div>
      <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
      <div class="flex justify-center gap-6 text-sm text-gray-300">
        <div class="flex items-center gap-2"><i class="fa-solid fa-users"></i>–ü–æ–¥–ø–∏—Å—á–∏–∫–æ–≤: <span id="subscriberCount" class="font-semibold">421</span></div>
        <div class="flex items-center gap-2"><i class="fa-solid fa-eye"></i>–ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤: <span id="viewCount" class="font-semibold">153K</span></div>
      </div>
    </div>
    <!-- –í–∏–¥–µ–æ + —Ü–∏—Ç–∞—Ç–∞ -->
    <div class="relative mt-8 fade-in flex flex-col items-center">
      <video class="banner-video w-full max-w-md rounded-3xl shadow-2xl" loading="lazy" autoplay muted loop playsinline preload="metadata" aria-label="–ê–≤–∞—Ç–∞—Ä –∫–∞–Ω–∞–ª–∞ Mortis Play">
        <source src="/assets/photo.mp4" type="video/mp4" />
        <img src="/assets/fallback.jpg" alt="–í–∏–¥–µ–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ" />
      </video>
      <img class="banner-fallback w-full max-w-md rounded-3xl shadow-2xl" src="/assets/photo.jpg" alt="–ê–≤–∞—Ç–∞—Ä –∫–∞–Ω–∞–ª–∞ Mortis Play" />
      <div class="banner-quote mt-6 lg:mt-8 lg:absolute lg:-bottom-6 lg:-right-6 bg-white/80 dark:bg-slate-900/80 glass rounded-2xl px-5 py-3 shadow card-hover w-full max-w-xs mx-auto lg:mx-0">
        <p class="text-sm text-slate-600 dark:text-slate-300 text-center lg:text-left">–£ —Å–∞–º—É—Ä–∞—è –Ω–µ—Ç —Ü–µ–ª–∏, —É –Ω–µ–≥–æ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –ø—É—Ç—å. ü•∑</p>
      </div>
    </div>
  </div>
</section>

      <!-- === –û–ë–ù–û–í–õ–ï–ù–ù–´–ô –†–ê–ó–î–ï–õ –í–ò–î–ï–û –° –ö–ê–¢–ï–ì–û–†–ò–Ø–ú–ò –ò –ü–û–ò–°–ö–û–ú === -->
<section id="video" class="py-24 fade-in bg-gradient-to-b from-purple-900/20 to-transparent">
  <div class="mx-auto max-w-7xl px-4 text-center">
    <h2 class="neon-title text-4xl md:text-6xl font-bold mb-12">–í–∏–¥–µ–æ</h2>
    <div class="glass-card p-8 max-w-5xl mx-auto">
      <p class="text-3xl font-bold text-purple-300 mb-6">–°–∏—Å—Ç–µ–º–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π</p>
      <p class="text-lg text-gray-300 leading-relaxed mb-8">
        –¢–µ–ø–µ—Ä—å –≤—Å–µ –≤–∏–¥–µ–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞!
      </p>
      
      <!-- –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã -->
      <div class="mb-8">
        <div class="flex flex-col md:flex-row gap-4 justify-center items-center">
          <!-- –ü–æ–ª–µ –ø–æ–∏—Å–∫–∞ -->
          <div class="relative w-full md:w-64">
            <input type="text" id="videoSearch" placeholder="–ü–æ–∏—Å–∫ –≤–∏–¥–µ–æ..." class="w-full px-4 py-2 rounded-full bg-slate-800/50 border border-slate-600 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500">
            <i class="fa-solid fa-search absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
          </div>
          
          <!-- –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º -->
          <select id="categoryFilter" class="w-full md:w-48 px-4 py-2 rounded-full bg-slate-800/50 border border-slate-600 text-white focus:outline-none focus:ring-2 focus:ring-purple-500">
            <option value="all">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
            <option value="—É–≥–∞—Ä">–£–≥–∞—Ä</option>
            <option value="—Å—Ç—Ä–∏–º—ã">–ó–∞–ø–∏—Å–∏ —Å–æ —Å—Ç—Ä–∏–º–∞</option>
            <option value="–ø–æ–¥–∫–∞—Å—Ç">–ü–æ–¥–∫–∞—Å—Ç</option>
            <option value="–¥—Ä—É–≥–æ–µ">–î—Ä—É–≥–æ–µ</option>
          </select>
          
          <!-- –ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ -->
          <button id="resetFilters" class="neon-btn">
            <i class="fa-solid fa-rotate-left"></i> –°–±—Ä–æ—Å–∏—Ç—å
          </button>
        </div>
      </div>
      
      <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤–∏–¥–µ–æ -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
        <div class="glass-card p-6 text-center cursor-pointer hover:scale-105 transition-all duration-300 category-card" data-category="—É–≥–∞—Ä">
          <div class="text-4xl mb-4 text-green-400">
            <i class="fa-solid fa-laugh"></i>
          </div>
          <h3 class="text-xl font-bold text-white mb-2">–£–≥–∞—Ä</h3>
          <p class="text-gray-300 text-sm">–°–º–µ—à–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã –∏ –º–µ–º—ã</p>
          <div class="mt-4 text-xs text-green-300">4 –≤–∏–¥–µ–æ</div>
        </div>
        
        <div class="glass-card p-6 text-center cursor-pointer hover:scale-105 transition-all duration-300 category-card" data-category="—Å—Ç—Ä–∏–º—ã">
          <div class="text-4xl mb-4 text-blue-400">
            <i class="fa-solid fa-broadcast-tower"></i>
          </div>
          <h3 class="text-xl font-bold text-white mb-2">–ó–∞–ø–∏—Å–∏ —Å–æ —Å—Ç—Ä–∏–º–∞</h3>
          <p class="text-gray-300 text-sm">–ü—Ä—è–º—ã–µ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏</p>
          <div class="mt-4 text-xs text-blue-300">4 –≤–∏–¥–µ–æ</div>
        </div>
        
        <div class="glass-card p-6 text-center cursor-pointer hover:scale-105 transition-all duration-300 category-card" data-category="–ø–æ–¥–∫–∞—Å—Ç">
          <div class="text-4xl mb-4 text-yellow-400">
            <i class="fa-solid fa-microphone"></i>
          </div>
          <h3 class="text-xl font-bold text-white mb-2">–ü–æ–¥–∫–∞—Å—Ç</h3>
          <p class="text-gray-300 text-sm">–ê—É–¥–∏–æ –∏ –≤–∏–¥–µ–æ –ø–æ–¥–∫–∞—Å—Ç—ã</p>
          <div class="mt-4 text-xs text-yellow-300">3 –≤–∏–¥–µ–æ</div>
        </div>
      </div>
      
      <!-- –°–ø–∏—Å–æ–∫ –≤–∏–¥–µ–æ -->
      <div id="videoList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- –í–∏–¥–µ–æ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
      </div>
      
      <!-- –°–æ–æ–±—â–µ–Ω–∏–µ, –µ—Å–ª–∏ –≤–∏–¥–µ–æ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã -->
      <div id="noVideosMessage" class="hidden text-center py-8">
        <i class="fa-solid fa-video-slash text-4xl text-gray-500 mb-4"></i>
        <p class="text-lg text-gray-400">–í–∏–¥–µ–æ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞.</p>
      </div>
      
      <!-- –ö–Ω–æ–ø–∫–∞ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â—ë" -->
      <div id="loadMoreVideosContainer" class="mt-8 text-center hidden">
        <button id="loadMoreVideos" class="neon-btn">
          <i class="fa-solid fa-plus"></i> –ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â—ë
        </button>
      </div>

      <p class="mt-8 text-sm text-gray-400">
        –≠—Ç–æ –ª–∏—à—å —Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª–æ! –°–∫–æ—Ä–æ –±—É–¥–µ—Ç –º–Ω–æ–≥–æ –≤–∏–¥–æ—Å–æ–≤, —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –Ω–æ–≤–æ—Å—Ç—è–º–∏.
      </p>
    </div>
  </div>
</section>

      <section id="profile" class="py-16 fade-in">
        <div class="mx-auto max-w-7xl px-4">
          <h2 class="neon-title text-3xl md:text-5xl font-bold text-center mb-8">–¢–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
          <p class="mt-2 text-center text-gray-300 text-lg">–ö–∞—Å—Ç–æ–º–∏–∑–∏—Ä—É–π —Å–≤–æ–π –≤–∞–π–± –∏ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π –±–µ–π–¥–∂–∏! üòé</p>
          <div class="mt-4 max-w-md mx-auto">
            <div class="notification" id="profileBetaNotice">
              <span>‚ö†Ô∏è –≠—Ç–æ –±–µ—Ç–∞-–≤–µ—Ä—Å–∏—è –ø—Ä–æ—Ñ–∏–ª—è! –ò–Ω–æ–≥–¥–∞ –º–æ–∂–µ—Ç –±–∞–≥–∞—Ç—å—Å—è ‚Äî –ø–∏—à–∏ –≤ Telegram, –µ—Å–ª–∏ —á—Ç–æ!</span>
              <button aria-label="–ó–∞–∫—Ä—ã—Ç—å"><i class="fa-solid fa-xmark"></i></button>
            </div>
          </div>
          <div class="mt-8 max-w-md mx-auto glass-card p-8">
            <h3 class="text-2xl font-bold text-purple-300 flex items-center gap-3 mb-4">
              <i class="fa-solid fa-user text-purple-400"></i> –ê–≤–∞—Ç–∞—Ä
            </h3>
            <img id="userAvatar" src="/assets/fallback.jpg" alt="–ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" class="w-24 h-24 rounded-full mx-auto">
            <input type="file" id="avatarUpload" accept="image/*" class="mt-3 w-full rounded border border-slate-200 dark:border-slate-700 p-2">
            <p class="mt-2 text-xs text-gray-300">–ó–∞–≥—Ä—É–∑–∏ —Å–≤–æ–π –∞–≤–∞—Ç–∞—Ä (–¥–æ 1–ú–ë).</p>
            <h3 class="mt-4 text-2xl font-bold text-purple-300 flex items-center gap-3 mb-4">
              <i class="fa-solid fa-id-card text-purple-400"></i> –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            </h3>
            <input type="text" id="usernameInput" maxlength="20" placeholder="–í–≤–µ–¥–∏ —Å–≤–æ—ë –∏–º—è" class="mt-3 w-full rounded border border-slate-200 dark:border-slate-700 p-2 text-sm text-gray-200">
            <p class="mt-2 text-xs text-gray-300">–ú–∞–∫—Å–∏–º—É–º 20 —Å–∏–º–≤–æ–ª–æ–≤.</p>
            <h3 class="mt-4 text-2xl font-bold text-purple-300 flex items-center gap-3 mb-4">
              <i class="fa-solid fa-award text-purple-400"></i> –ë–µ–π–¥–∂–∏
            </h3>
            <div id="badges" class="flex flex-wrap gap-2"></div>
            <h3 class="mt-4 text-2xl font-bold text-purple-300 flex items-center gap-3 mb-4">
              <i class="fa-solid fa-list text-purple-400"></i> –î–æ—Å—Ç—É–ø–Ω—ã–µ –±–µ–π–¥–∂–∏
            </h3>
            <div id="badgeList" class="mt-2 space-y-2"></div>
          </div>
          <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –±–µ–π–¥–∂–∏–∫–æ–≤ -->
          <div id="badgeModal" class="fixed inset-0 bg-black/70 hidden flex items-center justify-center z-50 p-4" aria-modal="true" role="dialog">
            <div class="glass-card p-6 max-w-sm w-full shadow-2xl ring-1 ring-indigo-500/50 dark:ring-indigo-400/50 transform transition-all duration-300 max-h-[90vh] overflow-y-auto">
              <div class="flex justify-between items-center mb-4">
                <h3 id="modalTitle" class="font-semibold text-indigo-600 dark:text-indigo-400 text-xl"></h3>
                <button id="closeModal" class="absolute top-4 right-4 text-slate-600 dark:text-slate-300 hover:text-indigo-600 dark:hover:text-indigo-400 text-xl"><i class="fa-solid fa-xmark"></i></button>
              </div>
              <div id="modalIcon" class="text-center mb-4"></div>
              <p id="modalDesc" class="mt-2 text-sm text-gray-300"></p>
              <p id="modalProgress" class="mt-2 text-xs text-gray-400"></p>
              <p id="modalRarity" class="mt-2 text-xs font-bold text-indigo-600 dark:text-indigo-400"></p>
              <button id="closeModalBtn" class="mt-4 neon-btn w-full">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
          </div>
        </div>
      </section>

      <section id="news" class="py-16 fade-in">
        <div class="mx-auto max-w-7xl px-4">
          <h2 class="neon-title text-3xl md:text-5xl font-bold text-center mb-8">–ù–æ–≤–æ—Å—Ç–∏</h2>
          <div id="newsGrid" class="mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- –ù–æ–≤–æ—Å—Ç–∏ –≤—Å—Ç–∞–≤–ª—è—é—Ç—Å—è JS -->
          </div>
          <div class="mt-6 text-center">
            <button id="loadMoreNews" class="neon-btn">
              <i class="fa-solid fa-plus"></i> –ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â—ë
            </button>
          </div>
        </div>
      </section>

      <section id="settings" class="py-16 fade-in">
        <div class="mx-auto max-w-7xl px-4">
          <h2 class="neon-title text-3xl md:text-5xl font-bold text-center mb-8">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
          <p class="mt-2 text-center text-gray-300 text-lg">–ù–∞—Å—Ç—Ä–æ–π —Å–∞–π—Ç –ø–æ–¥ —Å–µ–±—è –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–º—Ñ–æ—Ä—Ç–∞! üòé</p>
          <div class="mt-8 max-w-2xl mx-auto glass-card p-8">
            <!-- –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
            <h3 class="text-2xl font-bold text-purple-300 flex items-center gap-3 mb-4">
              <i class="fa-solid fa-bell text-purple-400"></i> –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            </h3>
            
            <label class="mt-3 flex items-center gap-2">
              <input type="checkbox" id="newsNotificationsToggle" class="rounded text-indigo-600 focus:ring-indigo-500" aria-label="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤–æ—Å—Ç—è—Ö" aria-describedby="newsNotificationsDesc">
              <span class="text-sm text-gray-300">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤–æ—Å—Ç—è—Ö</span>
            </label>
            <p id="newsNotificationsDesc" class="mt-2 text-xs text-gray-300">–ü–æ–ª—É—á–∞–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤–∞–∂–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç—è—Ö –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö.</p>
            
            <label class="mt-3 flex items-center gap-2">
              <input type="checkbox" id="badgeNotificationsToggle" class="rounded text-indigo-600 focus:ring-indigo-500" aria-label="–í–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –±–µ–π–¥–∂–∞—Ö" aria-describedby="badgeNotificationsDesc">
              <span class="text-sm text-gray-300">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –±–µ–π–¥–∂–∞—Ö</span>
            </label>
            <p id="badgeNotificationsDesc" class="mt-2 text-xs text-gray-300">–ü–æ–ª—É—á–∞–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –±–µ–π–¥–∂–µ–π.</p>
            
            <!-- –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ -->
            <h3 class="mt-6 text-2xl font-bold text-purple-300 flex items-center gap-3 mb-4">
              <i class="fa-solid fa-rocket text-purple-400"></i> –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
            </h3>
            <label class="mt-3 flex items-center gap-2">
              <input type="checkbox" id="lowPerformanceToggle" class="rounded text-indigo-600 focus:ring-indigo-500" aria-label="–í–∫–ª—é—á–∏—Ç—å –ª—ë–≥–∫–∏–π —Ä–µ–∂–∏–º" aria-describedby="lowPerformanceDesc">
              <span class="text-sm text-gray-300">–õ—ë–≥–∫–∏–π —Ä–µ–∂–∏–º (–¥–ª—è —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤)</span>
            </label>
            <p id="lowPerformanceDesc" class="mt-2 text-xs text-gray-300">–û—Ç–∫–ª—é—á–∞–µ—Ç –∞–Ω–∏–º–∞—Ü–∏–∏, —ç—Ñ—Ñ–µ–∫—Ç—ã –∏ –≤–∏–¥–µ–æ –¥–ª—è –ø–ª–∞–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã –Ω–∞ —Å–ª–∞–±—ã—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–∞—Ö.</p>
            
            <label class="mt-3 flex items-center gap-2">
              <input type="checkbox" id="disableAnimationsToggle" class="rounded text-indigo-600 focus:ring-indigo-500" aria-label="–û—Ç–∫–ª—é—á–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏" aria-describedby="disableAnimationsDesc">
              <span class="text-sm text-gray-300">–û—Ç–∫–ª—é—á–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏</span>
            </label>
            <p id="disableAnimationsDesc" class="mt-2 text-xs text-gray-300">–û—Ç–∫–ª—é—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.</p>
            
            <label class="mt-3 flex items-center gap-2">
              <input type="checkbox" id="disableParticlesToggle" class="rounded text-indigo-600 focus:ring-indigo-500" aria-label="–û—Ç–∫–ª—é—á–∏—Ç—å —Ñ–æ–Ω–æ–≤—ã–µ —á–∞—Å—Ç–∏—Ü—ã" aria-describedby="disableParticlesDesc">
              <span class="text-sm text-gray-300">–û—Ç–∫–ª—é—á–∏—Ç—å —Ñ–æ–Ω–æ–≤—ã–µ —á–∞—Å—Ç–∏—Ü—ã</span>
            </label>
            <p id="disableParticlesDesc" class="mt-2 text-xs text-gray-300">–û—Ç–∫–ª—é—á–∞–µ—Ç —Ñ–æ–Ω–æ–≤—ã–µ —á–∞—Å—Ç–∏—Ü—ã –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.</p>
            
            <label class="mt-3 flex items-center gap-2">
              <input type="checkbox" id="reduceImageQualityToggle" class="rounded text-indigo-600 focus:ring-indigo-500" aria-label="–°–Ω–∏–∑–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π" aria-describedby="reduceImageQualityDesc">
              <span class="text-sm text-gray-300">–°–Ω–∏–∑–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</span>
            </label>
            <p id="reduceImageQualityDesc" class="mt-2 text-xs text-gray-300">–ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –±–æ–ª–µ–µ –Ω–∏–∑–∫–æ–º –∫–∞—á–µ—Å—Ç–≤–µ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞.</p>
            
            <label class="mt-3 flex items-center gap-2">
              <input type="checkbox" id="lazyLoadingToggle" class="rounded text-indigo-600 focus:ring-indigo-500" aria-label="–í–∫–ª—é—á–∏—Ç—å –ª–µ–Ω–∏–≤—É—é –∑–∞–≥—Ä—É–∑–∫—É" aria-describedby="lazyLoadingDesc">
              <span class="text-sm text-gray-300">–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞</span>
            </label>
            <p id="lazyLoadingDesc" class="mt-2 text-xs text-gray-300">–ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ –º–µ—Ä–µ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –Ω–∞—á–∞–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏.</p>
            
            <div id="performanceNotification" class="notification" role="alert" aria-live="assertive">
              <span></span>
              <button aria-label="–ó–∞–∫—Ä—ã—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ"><i class="fa-solid fa-xmark"></i></button>
            </div>
            
            <!-- –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å -->
            <h3 class="mt-6 text-2xl font-bold text-purple-300 flex items-center gap-3 mb-4">
              <i class="fa-solid fa-universal-access text-purple-400"></i> –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
            </h3>
            <label class="mt-3 flex items-center gap-2">
              <input type="checkbox" id="highContrastToggle" class="rounded text-indigo-600 focus:ring-indigo-500" aria-label="–í–∫–ª—é—á–∏—Ç—å –≤—ã—Å–æ–∫—É—é –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç—å" aria-describedby="highContrastDesc">
              <span class="text-sm text-gray-300">–í—ã—Å–æ–∫–∞—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç—å</span>
            </label>
            <p id="highContrastDesc" class="mt-2 text-xs text-gray-300">–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç—å –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏.</p>
            
            <label class="mt-3 flex items-center gap-2">
              <input type="checkbox" id="largeTextToggle" class="rounded text-indigo-600 focus:ring-indigo-500" aria-label="–£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞" aria-describedby="largeTextDesc">
              <span class="text-sm text-gray-300">–£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞</span>
            </label>
            <p id="largeTextDesc" class="mt-2 text-xs text-gray-300">–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏.</p>
            
            <label class="mt-3 flex items-center gap-2">
              <input type="checkbox" id="reduceMotionToggle" class="rounded text-indigo-600 focus:ring-indigo-500" aria-label="–£–º–µ–Ω—å—à–∏—Ç—å –¥–≤–∏–∂–µ–Ω–∏–µ" aria-describedby="reduceMotionDesc">
              <span class="text-sm text-gray-300">–£–º–µ–Ω—å—à–∏—Ç—å –¥–≤–∏–∂–µ–Ω–∏–µ</span>
            </label>
            <p id="reduceMotionDesc" class="mt-2 text-xs text-gray-300">–£–º–µ–Ω—å—à–∞–µ—Ç –∏–ª–∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∫ –¥–≤–∏–∂–µ–Ω–∏—é.</p>
            
            <label class="mt-3 flex items-center gap-2">
              <input type="checkbox" id="keyboardNavigationToggle" class="rounded text-indigo-600 focus:ring-indigo-500" aria-label="–í–∫–ª—é—á–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã" aria-describedby="keyboardNavigationDesc">
              <span class="text-sm text-gray-300">–£–ª—É—á—à–µ–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã</span>
            </label>
            <p id="keyboardNavigationDesc" class="mt-2 text-xs text-gray-300">–£–ª—É—á—à–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã.</p>
            
            <label class="mt-3 flex items-center gap-2">
              <input type="checkbox" id="screenReaderToggle" class="rounded text-indigo-600 focus:ring-indigo-500" aria-label="–í–∫–ª—é—á–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å–∫—Ä–∏–Ω—Ä–∏–¥–µ—Ä–æ–≤" aria-describedby="screenReaderDesc">
              <span class="text-sm text-gray-300">–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–∫—Ä–∏–Ω—Ä–∏–¥–µ—Ä–æ–≤</span>
            </label>
            <p id="screenReaderDesc" class="mt-2 text-xs text-gray-300">–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç —Å–∞–π—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏ —á—Ç–µ–Ω–∏—è —Å —ç–∫—Ä–∞–Ω–∞.</p>
            
            <!-- –í–Ω–µ—à–Ω–∏–π –≤–∏–¥ -->
            <h3 class="mt-6 text-2xl font-bold text-purple-300 flex items-center gap-3 mb-4">
              <i class="fa-solid fa-palette text-purple-400"></i> –í–Ω–µ—à–Ω–∏–π –≤–∏–¥
            </h3>
            <label class="mt-3 flex items-center gap-2">
              <span class="text-sm text-gray-300">–¢–µ–º–∞ —Å–∞–π—Ç–∞:</span>
              <select id="themeSelect" class="rounded text-indigo-600 focus:ring-indigo-500 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700">
                <option value="auto">–ê–≤—Ç–æ</option>
                <option value="light">–°–≤–µ—Ç–ª–∞—è</option>
                <option value="dark">–¢—ë–º–Ω–∞—è</option>
              </select>
            </label>
            
            <label class="mt-3 flex flex-col gap-2">
              <span class="text-sm text-gray-300">–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞:</span>
              <input type="range" id="fontSizeSlider" min="50" max="200" value="100" class="w-full" aria-label="–†–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —à—Ä–∏—Ñ—Ç–∞" aria-valuemin="50" aria-valuemax="200" aria-valuenow="100">
            </label>
            <p class="mt-2 text-xs text-gray-300">–†–µ–≥—É–ª–∏—Ä—É–π —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —á—Ç–µ–Ω–∏—è (50%‚Äì200%).</p>
            
            <!-- –ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞ —Ä–∞–∑–º–µ—Ä–∞ —à—Ä–∏—Ñ—Ç–∞ -->
            <button id="resetFontSize" class="neon-btn mt-2">
              <i class="fa-solid fa-rotate-left"></i> –°–±—Ä–æ—Å–∏—Ç—å —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ (100%)
            </button>
            
            <div id="appearanceNotification" class="notification" role="alert" aria-live="assertive">
              <span></span>
              <button aria-label="–ó–∞–∫—Ä—ã—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ"><i class="fa-solid fa-xmark"></i></button>
            </div>
            
            <div class="mt-6 text-center">
              <button id="resetSettings" class="neon-btn" aria-label="–°–±—Ä–æ—Å–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏">
                <i class="fa-solid fa-rotate-left"></i> –°–±—Ä–æ—Å–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
              </button>
              <button id="resetProfile" class="neon-btn mt-2 bg-red-500 hover:bg-red-600" aria-label="–°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å">
                <i class="fa-solid fa-user-slash"></i> –°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
              </button>
            </div>
          </div>
        </div>
      </section>

      <section id="contact" class="py-16 fade-in">
        <div class="mx-auto max-w-5xl px-4">
          <h2 class="neon-title text-3xl md:text-5xl font-bold text-center mb-8">–°–≤—è–∑—å —Å–æ –º–Ω–æ–π</h2>
          <p class="mt-2 text-center text-gray-300 text-lg">–•–æ—á–µ—à—å –∫–æ–ª–ª–∞–± –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–æ–±–æ–ª—Ç–∞—Ç—å? –ü–∏—à–∏!</p>
          <div class="mt-6 grid gap-6">
            <div class="glass-card p-6">
              <ul class="space-y-2 text-gray-300">
                <li>Telegram: <a class="text-purple-300 underline" href="https://t.me/dimap7221" rel="noopener">MortisPlay</a></li>
                <li>–ö–∞–Ω–∞–ª: <a class="text-purple-300 underline" href="https://t.me/MortisPlayTG" rel="noopener">@MortisPlayTG</a></li>
                <li>–ß–∞—Å—Ç–Ω—ã–π –∫–∞–Ω–∞–ª: <a class="text-purple-300 underline" href="https://t.me/+GqoVoVYJR185ZmYy" rel="noopener">–ß–∞—Å—Ç–Ω—ã–π –∫–∞–Ω–∞–ª</a></li>
                <li>Email: <a class="text-purple-300 underline" href="mailto:mortisplay@mail.ru" rel="noopener">mortisplay@mail.ru</a></li>
              </ul>
              <div class="mt-4 flex flex-wrap gap-3">
                <a href="https://t.me/Mortisplay_YT" class="neon-btn" rel="noopener" aria-label="Telegram Mortis Play"><i class="fa-brands fa-telegram"></i>Telegram</a>
                <a href="https://t.me/MortisPlayTG" class="neon-btn" rel="noopener" aria-label="Telegram Channel Mortis Play"><i class="fa-brands fa-telegram"></i>–ö–∞–Ω–∞–ª</a>
                <a href="https://www.youtube.com/@MortisPlay" target="_blank" class="neon-btn" rel="noopener" aria-label="YouTube Mortis Play"><i class="fa-brands fa-youtube"></i>YouTube</a>
                <a href="https://rutube.ru/channel/24189155/" target="_blank" class="neon-btn" rel="noopener" aria-label="Rutube Mortis Play"><i class="fa-solid fa-play-circle"></i>Rutube</a>
                <a href="https://www.twitch.tv/mortisplay32" target="_blank" class="neon-btn" rel="noopener" aria-label="Twitch Mortis Play"><i class="fa-brands fa-twitch"></i>Twitch</a>
                <a href="https://www.tiktok.com/@mortisplay32" target="_blank" class="neon-btn" rel="noopener" aria-label="TikTok Mortis Play"><i class="fa-brands fa-tiktok"></i>TikTok</a>
                <a href="https://discord.gg/c7EmwzR4cX" target="_blank" class="neon-btn" rel="noopener" aria-label="Discord Mortis Play"><i class="fa-brands fa-discord"></i>Discord</a>
              </div>
              <div class="mt-4">
                <a href="https://www.donationalerts.com/r/mortis32" target="_blank" class="neon-btn" rel="noopener" aria-label="–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç Mortis Play"><i class="fa-solid fa-hand-holding-dollar"></i> –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</a>
              </div>
            </div>
          </div>
        </div>
      </section>

      <footer class="border-t border-slate-200/60 dark:border-slate-700/60 py-8">
        <div class="mx-auto max-w-7xl px-4 flex flex-col sm:flex-row items-center justify-between gap-4">
          <p class="text-sm text-gray-300">¬© 2025 Mortis Play. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </div>
      </footer>
    </main>
    <div id="fontNotification" class="notification top-notification" role="alert" aria-live="assertive">
      <span></span>
      <button aria-label="–ó–∞–∫—Ä—ã—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ"><i class="fa-solid fa-xmark"></i></button>
    </div>
    <script nonce="${nonce}">
      // === –£–õ–£–ß–®–ï–ù–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –ó–ê–ì–†–£–ó–ö–ò –° –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï–ú ===
      const setupLoader = () => {
        const loader = document.getElementById('loader');
        const siteContent = document.getElementById('siteContent');
        const slowLoadWarning = document.getElementById('slowLoadWarning');
        
        if (loader && siteContent && slowLoadWarning) {
          let slowLoadTimeout = setTimeout(() => {
            if (loader.style.display !== 'none') {
              slowLoadWarning.classList.remove('hidden');
              slowLoadWarning.classList.add('show');
              gtag('event', 'slow_load_warning', { event_category: 'performance', event_label: 'slow_loading' });
              logAction('–ü–æ–∫–∞–∑–∞–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –º–µ–¥–ª–µ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ');
              
              // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
              const closeButton = slowLoadWarning.querySelector('button');
              if (closeButton) {
                closeButton.addEventListener('click', () => {
                  slowLoadWarning.classList.remove('show');
                  setTimeout(() => slowLoadWarning.classList.add('hidden'), 500);
                }, { once: true });
              }
            }
          }, 5000); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥

          const hideLoader = () => {
            clearTimeout(slowLoadTimeout);
            loader.style.display = 'none';
            siteContent.classList.remove('hidden');
            slowLoadWarning.classList.remove('show');
            slowLoadWarning.classList.add('hidden');
            gtag('event', 'page_load', { event_category: 'performance', event_label: 'site_loaded' });
            logAction('–°–∞–π—Ç –∑–∞–≥—Ä—É–∂–µ–Ω');
          };

          // –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –±—ã—Å—Ç—Ä–µ–µ —Å –ø–æ–º–æ—â—å—é DOMContentLoaded
          document.addEventListener('DOMContentLoaded', () => {
            setTimeout(hideLoader, 100);
          });

          // –ù–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ DOMContentLoaded –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç
          window.addEventListener('load', () => {
            setTimeout(hideLoader, 500);
          });

          // –§–æ–ª–±—ç–∫ –Ω–∞ 10 —Å–µ–∫—É–Ω–¥
          setTimeout(hideLoader, 10000);
        }
      };

      // === –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –£–í–ï–î–û–ú–õ–ï–ù–ò–ô ===
      const logAction = (message) => console.log(message);
      const debounce = (func, wait) => {
        let timeout;
        return (...args) => {
          clearTimeout(timeout);
          timeout = setTimeout(() => func.apply(this, args), wait);
        };
      };
      let lastNotificationTime = 0;
      
      // –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –£–í–ï–î–û–ú–õ–ï–ù–ò–ô –í –ü–†–ê–í–û–ú –ù–ò–ñ–ù–ï–ú –£–ì–õ–£
      const showNotification = (message, notificationElement) => {
        const now = Date.now();
        if (now - lastNotificationTime < 3000) return;
        lastNotificationTime = now;
        
        if (notificationElement) {
          const span = notificationElement.querySelector('span');
          if (span) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            document.querySelectorAll('.notification.show').forEach(el => {
              if (el !== notificationElement) {
                el.classList.remove('show');
              }
            });
            
            span.textContent = message;
            notificationElement.classList.add('show');
            
            // –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É
            notificationElement.style.position = 'fixed';
            notificationElement.style.bottom = '1rem';
            notificationElement.style.right = '1rem';
            notificationElement.style.zIndex = '1000';
            notificationElement.style.maxWidth = '320px';
            
            gtag('event', 'notification_shown', { event_category: 'settings', event_label: message });
            
            const timeout = setTimeout(() => {
              notificationElement.classList.remove('show');
            }, 5000);
            
            const closeButton = notificationElement.querySelector('button');
            if (closeButton) {
              // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏ –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π
              closeButton.replaceWith(closeButton.cloneNode(true));
              const newCloseButton = notificationElement.querySelector('button');
              newCloseButton.addEventListener('click', () => {
                notificationElement.classList.remove('show');
                clearTimeout(timeout);
                gtag('event', 'notification_dismiss', { event_category: 'settings', event_label: 'dismiss_notification' });
                logAction('–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ');
              }, { once: true });
            }
          }
        }
      };

      // === –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –ù–ê–°–¢–†–û–ô–ö–ê –£–í–ï–î–û–ú–õ–ï–ù–ò–ô –î–õ–Ø –†–ê–ó–î–ï–õ–ê –ù–ê–°–¢–†–û–ô–ö–ò ===
      const setupSettingsNotifications = () => {
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –Ω–æ–≤–æ—Å—Ç—è—Ö
        const newsNotificationsToggle = document.getElementById('newsNotificationsToggle');
        if (newsNotificationsToggle) {
          let savedNewsNotifications;
          try {
            savedNewsNotifications = localStorage.getItem('newsNotifications') !== 'false';
          } catch (e) {
            savedNewsNotifications = true;
          }
          newsNotificationsToggle.checked = savedNewsNotifications;
          newsNotificationsToggle.addEventListener('change', () => {
            const enableNewsNotifications = newsNotificationsToggle.checked;
            try {
              localStorage.setItem('newsNotifications', enableNewsNotifications);
            } catch (e) {
              logAction('–û—à–∏–±–∫–∞ –∑–∞–ø–∏—Å–∏ localStorage –¥–ª—è newsNotifications: ' + e.message);
            }
            showNotification(
              enableNewsNotifications ? '–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤–æ—Å—Ç—è—Ö –≤–∫–ª—é—á–µ–Ω—ã' : '–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤–æ—Å—Ç—è—Ö –æ—Ç–∫–ª—é—á–µ–Ω—ã', 
              document.getElementById('appearanceNotification')
            );
            gtag('event', 'news_notifications_toggle', { event_category: 'settings', event_label: enableNewsNotifications ? 'on' : 'off' });
            logAction(`–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤–æ—Å—Ç—è—Ö: ${enableNewsNotifications ? '–í–∫–ª—é—á–µ–Ω—ã' : '–û—Ç–∫–ª—é—á–µ–Ω—ã'}`);
          });
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –±–µ–π–¥–∂–∞—Ö
        const badgeNotificationsToggle = document.getElementById('badgeNotificationsToggle');
        if (badgeNotificationsToggle) {
          const saved = localStorage.getItem('badgeNotifications') !== 'false';
          badgeNotificationsToggle.checked = saved;
          badgeNotificationsToggle.addEventListener('change', () => {
            localStorage.setItem('badgeNotifications', badgeNotificationsToggle.checked);
            showNotification(
              badgeNotificationsToggle.checked ? '–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –±–µ–π–¥–∂–∞—Ö –≤–∫–ª—é—á–µ–Ω—ã' : '–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –±–µ–π–¥–∂–∞—Ö –æ—Ç–∫–ª—é—á–µ–Ω—ã', 
              document.getElementById('appearanceNotification')
            );
          });
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
        const setupToggleWithNotification = (toggleId, storageKey, notificationElement, messages) => {
          const toggle = document.getElementById(toggleId);
          if (toggle && notificationElement) {
            let savedState;
            try {
              savedState = localStorage.getItem(storageKey) === 'true';
            } catch (e) {
              savedState = false;
            }
            toggle.checked = savedState;
            toggle.addEventListener('change', debounce(() => {
              const isEnabled = toggle.checked;
              try {
                localStorage.setItem(storageKey, isEnabled);
              } catch (e) {
                logAction(`–û—à–∏–±–∫–∞ –∑–∞–ø–∏—Å–∏ localStorage –¥–ª—è ${storageKey}: ` + e.message);
              }
              showNotification(isEnabled ? messages.on : messages.off, notificationElement);
              gtag('event', `${storageKey}_toggle`, { event_category: 'settings', event_label: isEnabled ? 'on' : 'off' });
              logAction(`${messages.label}: ${isEnabled ? '–í–∫–ª—é—á–µ–Ω–æ' : '–û—Ç–∫–ª—é—á–µ–Ω–æ'}`);
            }, 300));
          }
        };

        // –ü—Ä–∏–º–µ–Ω—è–µ–º –∫–æ –≤—Å–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º
        setupToggleWithNotification(
          'lowPerformanceToggle', 
          'lowPerformance', 
          document.getElementById('performanceNotification'),
          { on: '–õ—ë–≥–∫–∏–π —Ä–µ–∂–∏–º –≤–∫–ª—é—á—ë–Ω', off: '–õ—ë–≥–∫–∏–π —Ä–µ–∂–∏–º –≤—ã–∫–ª—é—á–µ–Ω', label: '–õ—ë–≥–∫–∏–π —Ä–µ–∂–∏–º' }
        );

        setupToggleWithNotification(
          'disableAnimationsToggle',
          'disableAnimations',
          document.getElementById('performanceNotification'),
          { on: '–ê–Ω–∏–º–∞—Ü–∏–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã', off: '–ê–Ω–∏–º–∞—Ü–∏–∏ –≤–∫–ª—é—á–µ–Ω—ã', label: '–ê–Ω–∏–º–∞—Ü–∏–∏' }
        );

        setupToggleWithNotification(
          'disableParticlesToggle',
          'disableParticles',
          document.getElementById('performanceNotification'),
          { on: '–§–æ–Ω–æ–≤—ã–µ —á–∞—Å—Ç–∏—Ü—ã –æ—Ç–∫–ª—é—á–µ–Ω—ã', off: '–§–æ–Ω–æ–≤—ã–µ —á–∞—Å—Ç–∏—Ü—ã –≤–∫–ª—é—á–µ–Ω—ã', label: '–§–æ–Ω–æ–≤—ã–µ —á–∞—Å—Ç–∏—Ü—ã' }
        );

        setupToggleWithNotification(
          'highContrastToggle',
          'highContrast',
          document.getElementById('appearanceNotification'),
          { on: '–í—ã—Å–æ–∫–∞—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç—å –≤–∫–ª—é—á–µ–Ω–∞', off: '–í—ã—Å–æ–∫–∞—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç—å –≤—ã–∫–ª—é—á–µ–Ω–∞', label: '–í—ã—Å–æ–∫–∞—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç—å' }
        );
      };

      // –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π...
      const root = document.documentElement;
      
      // –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø setTheme
      const setTheme = (theme, isPreview = false) => {
        try {
          logAction(`–¢–µ–º–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞: ${theme}${isPreview ? ' (–ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä)' : ''}`);
          if (!isPreview) localStorage.setItem('theme', theme);
          
          // –£–±—Ä–∞–Ω–∞ –∑–∏–º–Ω—è—è —Ç–µ–º–∞
          document.body.classList.remove('winter-theme');
          root.classList.toggle('dark', theme === 'dark');
          // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—ã—á–Ω–æ–≥–æ —Ñ–æ–Ω–∞
          document.body.style.background = '';
          document.body.style.color = '';
          
          const themeToggle = document.getElementById('themeToggle');
          if (themeToggle) {
            const themeIcon = themeToggle.querySelector('i');
            const themeText = themeToggle.querySelector('span');
            if (themeIcon && themeText) {
              themeIcon.className = theme === 'dark' ? 'fa-solid fa-moon' : 'fa-solid fa-sun';
              themeText.textContent = theme === 'dark' ? '–¢—ë–º–Ω–∞—è' : '–°–≤–µ—Ç–ª–∞—è';
            }
          }
          if (!isPreview) gtag('event', 'theme_toggle', { event_category: 'engagement', event_label: theme });
        } catch (e) {
          logAction('–û—à–∏–±–∫–∞ –≤ setTheme: ' + e.message);
        }
      };

      const setupThemeToggle = () => {
        const themeToggle = document.getElementById('themeToggle');
        if (themeToggle) {
          themeToggle.addEventListener('click', () => {
            const currentTheme = localStorage.getItem('theme') || 'auto';
            const isDark = root.classList.contains('dark');
            setTheme(isDark ? 'light' : 'dark');
          });
        }
      };

      // –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø setupThemeSelect
      const setupThemeSelect = () => {
        const themeSelect = document.getElementById('themeSelect');
        if (themeSelect) {
          let savedTheme;
          try {
            savedTheme = localStorage.getItem('theme') || 'auto';
          } catch (e) {
            savedTheme = 'auto';
            logAction('–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è localStorage –¥–ª—è theme: ' + e.message);
          }
          themeSelect.value = savedTheme;
          
          // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞—á–∞–ª—å–Ω–æ–π —Ç–µ–º—ã
          const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
          if (savedTheme === 'auto') {
            setTheme(prefersDark ? 'dark' : 'light');
          } else {
            setTheme(savedTheme);
          }
          
          let previewTimeout;
          themeSelect.addEventListener('change', () => {
            const theme = themeSelect.value;
            const effectiveTheme = theme === 'auto' && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : theme;
            clearTimeout(previewTimeout);
            setTheme(effectiveTheme, true);
            showNotification(`–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–º—ã: ${theme === 'auto' ? '–ê–≤—Ç–æ' : theme === 'light' ? '–°–≤–µ—Ç–ª–∞—è' : '–¢—ë–º–Ω–∞—è'}`, document.getElementById('appearanceNotification'));
            previewTimeout = setTimeout(() => {
              setTheme(effectiveTheme);
              showNotification(`–¢–µ–º–∞: ${theme === 'auto' ? '–ê–≤—Ç–æ' : theme === 'light' ? '–°–≤–µ—Ç–ª–∞—è' : '–¢—ë–º–Ω–∞—è'}`, document.getElementById('appearanceNotification'));
              gtag('event', 'theme_select', { event_category: 'settings', event_label: theme });
              logAction(`–¢–µ–º–∞ –≤—ã–±—Ä–∞–Ω–∞: ${theme}`);
            }, 2000);
          });
        }
      };

      const setupPerformance = () => {
        const toggle = document.getElementById('lowPerformanceToggle');
        const notification = document.getElementById('performanceNotification');
        if (toggle && notification) {
          let savedMode;
          try {
            savedMode = localStorage.getItem('lowPerformance') === 'true';
          } catch (e) {
            savedMode = false;
            logAction('–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è localStorage –¥–ª—è lowPerformance: ' + e.message);
          }
          toggle.checked = savedMode;
          root.classList.toggle('low-performance', savedMode);
        }
      };

      const setupAnimations = () => {
        const animationsToggle = document.getElementById('disableAnimationsToggle');
        const notification = document.getElementById('performanceNotification');
        if (animationsToggle && notification) {
          let savedAnimations;
          try {
            savedAnimations = localStorage.getItem('disableAnimations') === 'true';
          } catch (e) {
            savedAnimations = false;
            logAction('–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è localStorage –¥–ª—è disableAnimations: ' + e.message);
          }
          animationsToggle.checked = savedAnimations;
          root.classList.toggle('no-animations', savedAnimations);
        }
      };

      const setupParticleToggle = () => {
        const toggle = document.getElementById('disableParticlesToggle');
        const notification = document.getElementById('performanceNotification');
        if (toggle && notification) {
          let savedParticles;
          try {
            savedParticles = localStorage.getItem('disableParticles') === 'true';
          } catch (e) {
            savedParticles = false;
            logAction('–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è localStorage –¥–ª—è disableParticles: ' + e.message);
          }
          toggle.checked = savedParticles;
          root.classList.toggle('no-particles', savedParticles);
        }
      };

      const setupAdvancedPerformance = () => {
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–Ω–∏–∂–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
        const reduceImageQualityToggle = document.getElementById('reduceImageQualityToggle');
        if (reduceImageQualityToggle) {
          let savedQuality;
          try {
            savedQuality = localStorage.getItem('reduceImageQuality') === 'true';
          } catch (e) {
            savedQuality = false;
            logAction('–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è localStorage –¥–ª—è reduceImageQuality: ' + e.message);
          }
          reduceImageQualityToggle.checked = savedQuality;
        }
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–µ–Ω–∏–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
        const lazyLoadingToggle = document.getElementById('lazyLoadingToggle');
        if (lazyLoadingToggle) {
          let savedLazyLoading;
          try {
            savedLazyLoading = localStorage.getItem('lazyLoading') === 'true';
          } catch (e) {
            savedLazyLoading = true; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á–µ–Ω–æ
            logAction('–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è localStorage –¥–ª—è lazyLoading: ' + e.message);
          }
          lazyLoadingToggle.checked = savedLazyLoading;
        }
      };

      // –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø setupAccessibility
      const setupAccessibility = () => {
        // –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
        const largeTextToggle = document.getElementById('largeTextToggle');
        if (largeTextToggle) {
          let savedLargeText;
          try {
            savedLargeText = localStorage.getItem('largeText') === 'true';
          } catch (e) {
            savedLargeText = false;
            logAction('–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è localStorage –¥–ª—è largeText: ' + e.message);
          }
          largeTextToggle.checked = savedLargeText;
          root.classList.toggle('large-text', savedLargeText);
        }
        
        // –£–º–µ–Ω—å—à–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è
        const reduceMotionToggle = document.getElementById('reduceMotionToggle');
        if (reduceMotionToggle) {
          let savedReduceMotion;
          try {
            savedReduceMotion = localStorage.getItem('reduceMotion') === 'true';
          } catch (e) {
            savedReduceMotion = false;
            logAction('–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è localStorage –¥–ª—è reduceMotion: ' + e.message);
          }
          reduceMotionToggle.checked = savedReduceMotion;
          root.classList.toggle('reduce-motion', savedReduceMotion);
        }
        
        // –ù–∞–≤–∏–≥–∞—Ü–∏—è —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
        const keyboardNavigationToggle = document.getElementById('keyboardNavigationToggle');
        if (keyboardNavigationToggle) {
          let savedKeyboardNavigation;
          try {
            savedKeyboardNavigation = localStorage.getItem('keyboardNavigation') === 'true';
          } catch (e) {
            savedKeyboardNavigation = false;
            logAction('–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è localStorage –¥–ª—è keyboardNavigation: ' + e.message);
          }
          keyboardNavigationToggle.checked = savedKeyboardNavigation;
        }
        
        // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–∫—Ä–∏–Ω—Ä–∏–¥–µ—Ä–æ–≤
        const screenReaderToggle = document.getElementById('screenReaderToggle');
        if (screenReaderToggle) {
          let savedScreenReader;
          try {
            savedScreenReader = localStorage.getItem('screenReader') === 'true';
          } catch (e) {
            savedScreenReader = false;
            logAction('–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è localStorage –¥–ª—è screenReader: ' + e.message);
          }
          screenReaderToggle.checked = savedScreenReader;
        }

        // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤—Å–µ—Ö –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–π
        const restoreToggleState = (toggleId, storageKey) => {
          const toggle = document.getElementById(toggleId);
          if (toggle) {
            try {
              const savedState = localStorage.getItem(storageKey);
              if (savedState !== null) {
                toggle.checked = savedState === 'true';
              }
            } catch (e) {
              logAction(`–û—à–∏–±–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è ${toggleId}: ` + e.message);
            }
          }
        };
        
        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è
        restoreToggleState('reduceImageQualityToggle', 'reduceImageQuality');
        restoreToggleState('lazyLoadingToggle', 'lazyLoading');
        restoreToggleState('largeTextToggle', 'largeText');
        restoreToggleState('reduceMotionToggle', 'reduceMotion');
        restoreToggleState('keyboardNavigationToggle', 'keyboardNavigation');
        restoreToggleState('screenReaderToggle', 'screenReader');
        restoreToggleState('newsNotificationsToggle', 'newsNotifications');
        restoreToggleState('badgeNotificationsToggle', 'badgeNotifications');
      };

      const setupFontSize = () => {
        const slider = document.getElementById('fontSizeSlider');
        const resetButton = document.getElementById('resetFontSize');
        if (slider) {
          let savedFontSize;
          try {
            savedFontSize = localStorage.getItem('fontSize') || '100';
          } catch (e) {
            savedFontSize = '100';
            logAction('–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è localStorage –¥–ª—è fontSize: ' + e.message);
          }
          slider.value = savedFontSize;
          root.style.setProperty('--font-scale', savedFontSize / 100);
          let fontNotificationTimer;
          slider.addEventListener('input', () => {
            const fontSize = slider.value;
            root.style.setProperty('--font-scale', fontSize / 100);
            const notif = document.getElementById('fontNotification');
            if (notif) {
              const span = notif.querySelector('span');
              span.textContent = `–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞: ${fontSize}%`;
              if (!notif.classList.contains('show')) {
                notif.classList.add('show');
                // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞ - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç—Å—è
                notif.style.top = '1rem';
                notif.style.left = '50%';
                notif.style.transform = 'translateX(-50%)';
              }
              clearTimeout(fontNotificationTimer);
              fontNotificationTimer = setTimeout(() => {
                notif.classList.remove('show');
                try {
                  localStorage.setItem('fontSize', fontSize);
                } catch (e) {
                  logAction('–û—à–∏–±–∫–∞ –∑–∞–ø–∏—Å–∏ localStorage –¥–ª—è fontSize: ' + e.message);
                }
                gtag('event', 'font_size_change', { event_category: 'settings', event_label: fontSize });
                logAction(`–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –∏–∑–º–µ–Ω—ë–Ω: ${fontSize}%`);
              }, 1000); // –°–∫—Ä—ã—Ç—å –ø–æ—Å–ª–µ 1 —Å–µ–∫—É–Ω–¥—ã –ø–∞—É–∑—ã
            }
          });
          
          // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ —Å–±—Ä–æ—Å–∞ —Ä–∞–∑–º–µ—Ä–∞ —à—Ä–∏—Ñ—Ç–∞
          if (resetButton) {
            resetButton.addEventListener('click', () => {
              slider.value = '100';
              root.style.setProperty('--font-scale', '1');
              localStorage.setItem('fontSize', '100');
              showNotification('–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ —Å–±—Ä–æ—à–µ–Ω –¥–æ 100%', document.getElementById('appearanceNotification'));
              gtag('event', 'font_size_reset', { event_category: 'settings', event_label: 'reset' });
              logAction('–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ —Å–±—Ä–æ—à–µ–Ω –¥–æ 100%');
            });
          }
          
          const fontNotifClose = document.getElementById('fontNotification').querySelector('button');
          if (fontNotifClose) {
            fontNotifClose.addEventListener('click', () => {
              document.getElementById('fontNotification').classList.remove('show');
              clearTimeout(fontNotificationTimer);
            });
          }
        }
      };

      const setupHighContrast = () => {
        const toggle = document.getElementById('highContrastToggle');
        const notification = document.getElementById('appearanceNotification');
        if (toggle && notification) {
          let savedHighContrast;
          try {
            savedHighContrast = localStorage.getItem('highContrast') === 'true';
          } catch (e) {
            savedHighContrast = false;
            logAction('–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è localStorage –¥–ª—è highContrast: ' + e.message);
          }
          toggle.checked = savedHighContrast;
          root.classList.toggle('high-contrast', savedHighContrast);
        }
      };

      const setupResetSettings = () => {
        const resetButton = document.getElementById('resetSettings');
        const notification = document.getElementById('appearanceNotification');
        if (resetButton && notification) {
          resetButton.addEventListener('click', () => {
            const confirmReset = confirm(
              '‚ö†Ô∏è –¢–æ—á–Ω–æ —Å–±—Ä–æ—Å–∏—Ç—å –í–°–Å?\n\n' +
              '‚Ä¢ –ü—Ä–æ—Ñ–∏–ª—å (–∞–≤–∞—Ç–∞—Ä, –∏–º—è)\n' +
              '‚Ä¢ –í—Å–µ –±–µ–π–¥–∂–∏\n' +
              '‚Ä¢ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (—Ç–µ–º–∞, —à—Ä–∏—Ñ—Ç, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)\n' +
              '‚Ä¢ –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤\n\n' +
              '–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –ù–ï–õ–¨–ó–Ø –æ—Ç–º–µ–Ω–∏—Ç—å!'
            );
            if (!confirmReset) {
              showNotification('–°–±—Ä–æ—Å –æ—Ç–º–µ–Ω—ë–Ω', notification);
              return;
            }
            localStorage.removeItem('theme');
            localStorage.removeItem('lowPerformance');
            localStorage.removeItem('disableAnimations');
            localStorage.removeItem('disableParticles');
            localStorage.removeItem('fontSize');
            localStorage.removeItem('highContrast');
            localStorage.removeItem('userAvatar');
            localStorage.removeItem('userBadges');
            localStorage.removeItem('username');
            localStorage.removeItem('profileBetaNoticeHidden');
            localStorage.removeItem('badgeNotifications');
            localStorage.removeItem('secretClicks');
            localStorage.removeItem('mortis_hacker');
            localStorage.removeItem('ghostScrolls');
            localStorage.removeItem('ghostScrollsEarned');
            localStorage.removeItem('speed_reader');
            localStorage.removeItem('mobile_views');
            localStorage.removeItem('dark_prince');
            localStorage.removeItem('newsNotifications');
            localStorage.removeItem('reduceImageQuality');
            localStorage.removeItem('lazyLoading');
            localStorage.removeItem('largeText');
            localStorage.removeItem('reduceMotion');
            localStorage.removeItem('keyboardNavigation');
            localStorage.removeItem('screenReader');
            root.classList.remove('dark', 'low-performance', 'no-animations', 'no-particles', 'high-contrast', 'large-text', 'reduce-motion', 'winter-theme');
            root.style.setProperty('--font-scale', '1');
            const themeSelect = document.getElementById('themeSelect');
            const lowPerformanceToggle = document.getElementById('lowPerformanceToggle');
            const animationsToggle = document.getElementById('disableAnimationsToggle');
            const particleToggle = document.getElementById('disableParticlesToggle');
            const fontSizeSlider = document.getElementById('fontSizeSlider');
            const highContrastToggle = document.getElementById('highContrastToggle');
            const userAvatar = document.getElementById('userAvatar');
            const usernameInput = document.getElementById('usernameInput');
            const badges = document.getElementById('badges');
            const badgeList = document.getElementById('badgeList');
            const badgeNotificationsToggle = document.getElementById('badgeNotificationsToggle');
            const newsNotificationsToggle = document.getElementById('newsNotificationsToggle');
            const reduceImageQualityToggle = document.getElementById('reduceImageQualityToggle');
            const lazyLoadingToggle = document.getElementById('lazyLoadingToggle');
            const largeTextToggle = document.getElementById('largeTextToggle');
            const reduceMotionToggle = document.getElementById('reduceMotionToggle');
            const keyboardNavigationToggle = document.getElementById('keyboardNavigationToggle');
            const screenReaderToggle = document.getElementById('screenReaderToggle');
            if (themeSelect) themeSelect.value = 'auto';
            if (lowPerformanceToggle) lowPerformanceToggle.checked = false;
            if (animationsToggle) animationsToggle.checked = false;
            if (particleToggle) particleToggle.checked = false;
            if (fontSizeSlider) fontSizeSlider.value = '100';
            if (highContrastToggle) highContrastToggle.checked = false;
            if (badgeNotificationsToggle) badgeNotificationsToggle.checked = true;
            if (newsNotificationsToggle) newsNotificationsToggle.checked = true;
            if (reduceImageQualityToggle) reduceImageQualityToggle.checked = false;
            if (lazyLoadingToggle) lazyLoadingToggle.checked = true;
            if (largeTextToggle) largeTextToggle.checked = false;
            if (reduceMotionToggle) reduceMotionToggle.checked = false;
            if (keyboardNavigationToggle) keyboardNavigationToggle.checked = false;
            if (screenReaderToggle) screenReaderToggle.checked = false;
            if (userAvatar) userAvatar.src = '/assets/fallback.jpg';
            if (usernameInput) usernameInput.value = '';
            if (badges) badges.innerHTML = '';
            if (badgeList) badgeList.innerHTML = '';
            setTheme('auto');
            setupBadges();
            showNotification('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø—Ä–æ—Ñ–∏–ª—å —Å–±—Ä–æ—à–µ–Ω—ã', notification);
            gtag('event', 'reset_settings', { event_category: 'settings', event_label: 'confirmed_reset' });
            logAction('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–±—Ä–æ—à–µ–Ω—ã (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ)');
          });
        }
      };

      // –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø createBadgeParticles
      const createBadgeParticles = (badgeEl, badgeName) => {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ—Ç –ª–∏ —É–∂–µ canvas –≤ —ç—Ç–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ
        if (badgeEl.querySelector('canvas')) {
          return () => {}; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç—É—é —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –æ—á–∏—Å—Ç–∫–∏
        }
        
        const canvas = document.createElement('canvas');
        canvas.style.cssText = `
          position: absolute; top: 0; left: 0; width: 100%; height: 100%;
          pointer-events: none; border-radius: 9999px; will-change: contents;
        `;
        badgeEl.style.position = 'relative';
        badgeEl.style.overflow = 'hidden';
        badgeEl.appendChild(canvas);
        const ctx = canvas.getContext('2d');
        let animationId;
        const resizeCanvas = () => {
          const rect = badgeEl.getBoundingClientRect();
          const dpr = window.devicePixelRatio || 1;
          canvas.width = rect.width * dpr;
          canvas.height = rect.height * dpr;
          canvas.style.width = rect.width + 'px';
          canvas.style.height = rect.height + 'px';
          ctx.scale(dpr, dpr);
        };
        // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤—ã–∑—ã–≤–∞–µ–º —Ä–µ—Å–∞–π–∑ —Å—Ä–∞–∑—É
        resizeCanvas();
        const ro = new ResizeObserver(() => {
          resizeCanvas();
        });
        ro.observe(badgeEl);
        const particles = [];
        const centerX = () => canvas.width / 2 / (window.devicePixelRatio || 1);
        const centerY = () => canvas.height / 2 / (window.devicePixelRatio || 1);
        const radius = () => Math.min(centerX(), centerY()) * 0.8;
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–∞—Å—Ç–∏—Ü
        if (badgeName.includes('–°–µ–∫—Ä–µ—Ç–Ω—ã–π –ê–≥–µ–Ω—Ç')) {
          for (let i = 0; i < 8; i++) {
            particles.push({
              angle: (i / 8) * Math.PI * 2,
              speed: 0.015 + Math.random() * 0.01,
              size: 1.8 + Math.random() * 1.2,
              color: Math.random() > 0.5 ? '#a855f7' : '#d946ef'
            });
          }
        } else if (badgeName.includes('–ö–æ–¥–æ–≤—ã–π –í–∑–ª–æ–º—â–∏–∫')) {
          for (let i = 0; i < 12; i++) {
            particles.push({
              x: Math.random() * 100,
              y: Math.random() * 100 - 100,
              speed: 1.8 + Math.random() * 1,
              color: '#22c55e'
            });
          }
        } else if (badgeName.includes('–ü—Ä–∏–∑—Ä–∞—á–Ω—ã–π –ó—Ä–∏—Ç–µ–ª—å')) {
          for (let i = 0; i < 6; i++) {
            particles.push({
              x: Math.random() * 100,
              y: Math.random() * 100,
              size: 3 + Math.random() * 3,
              speedX: (Math.random() - 0.5) * 1.2,
              speedY: (Math.random() - 0.5) * 1.2
            });
          }
        } else if (badgeName.includes('–ù–æ—á–Ω–æ–π –°—Ç–∞–ª–∫–µ—Ä')) {
          for (let i = 0; i < 10; i++) {
            particles.push({
              x: Math.random() * 100,
              y: Math.random() * 100 - 100,
              speed: 1.2 + Math.random() * 0.8,
              color: '#4b5563'
            });
          }
        } else if (badgeName.includes('–¢—ë–º–Ω—ã–π –ü–†–ò–ù–¶')) {
          // –°—Ç–∞—Ç–∏—á–Ω—ã–π —Ç—ë–º–Ω—ã–π –º–µ—á –Ω–∞ –∫–∞–º–Ω–µ (–ø—Ä–æ—Å—Ç–∞—è SVG-–ø–æ–¥–æ–±–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å –ª—ë–≥–∫–æ–π –∞–Ω–∏–º–∞—Ü–∏–µ–π —Å–≤–µ—á–µ–Ω–∏—è)
          particles.push({
            x: centerX() - 10,
            y: centerY() + 5,
            glow: 0
          });
        }
        const animate = () => {
          if (document.documentElement.classList.contains('low-performance')) return;
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          // –°–µ–∫—Ä–µ—Ç–Ω—ã–π –ê–≥–µ–Ω—Ç
          if (badgeName.includes('–°–µ–∫—Ä–µ—Ç–Ω—ã–π –ê–≥–µ–Ω—Ç')) {
            particles.forEach(p => {
              p.angle += p.speed;
              const x = centerX() + Math.cos(p.angle) * radius();
              const y = centerY() + Math.sin(p.angle) * radius();
              ctx.globalAlpha = 0.6 + 0.4 * Math.sin(p.angle * 3);
              ctx.fillStyle = p.color;
              ctx.beginPath();
              ctx.arc(x, y, p.size, 0, Math.PI * 2);
              ctx.fill();
            });
          }
          // –ö–æ–¥–æ–≤—ã–π –í–∑–ª–æ–º—â–∏–∫
          if (badgeName.includes('–ö–æ–¥–æ–≤—ã–π –í–∑–ª–æ–º—â–∏–∫')) {
            particles.forEach(p => {
              p.y += p.speed;
              if (p.y > 100) {
                p.y = -15;
                p.x = Math.random() * 100;
              }
              ctx.strokeStyle = p.color;
              ctx.globalAlpha = 0.7;
              ctx.lineWidth = 1.5;
              ctx.beginPath();
              ctx.moveTo(p.x, p.y);
              ctx.lineTo(p.x, p.y + 15);
              ctx.stroke();
              if (Math.random() < 0.05) {
                ctx.fillStyle = '#22c55e';
                ctx.globalAlpha = 1;
                ctx.font = '10px monospace';
                ctx.fillText(Math.random() < 0.5 ? '0' : '1', p.x - 5, p.y + 10);
              }
            });
          }
          // –ü—Ä–∏–∑—Ä–∞—á–Ω—ã–π –ó—Ä–∏—Ç–µ–ª—å
          if (badgeName.includes('–ü—Ä–∏–∑—Ä–∞—á–Ω—ã–π –ó—Ä–∏—Ç–µ–ª—å')) {
            particles.forEach(p => {
              p.x += p.speedX;
              p.y += p.speedY;
              if (p.x < 0 || p.x > 100) p.speedX *= -1;
              if (p.y < 0 || p.y > 100) p.speedY *= -1;
              ctx.globalAlpha = 0.4;
              ctx.fillStyle = '#e5e7eb';
              ctx.beginPath();
              ctx.moveTo(p.x, p.y);
              ctx.lineTo(p.x + p.size * 2, p.y);
              ctx.lineTo(p.x + p.size, p.y - p.size);
              ctx.closePath();
              ctx.fill();
            });
          }
          // –ù–æ—á–Ω–æ–π –°—Ç–∞–ª–∫–µ—Ä (–ø–æ—Ö–æ–∂–µ –Ω–∞ –∫–æ–¥–æ–≤—ã–π, –Ω–æ —Å "—Ç–µ–Ω—è–º–∏" - –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏)
          if (badgeName.includes('–ù–æ—á–Ω–æ–π –°—Ç–∞–ª–∫–µ—Ä')) {
            particles.forEach(p => {
              p.y += p.speed;
              if (p.y > 100) {
                p.y = -10;
                p.x = Math.random() * 100;
              }
              ctx.strokeStyle = p.color;
              ctx.globalAlpha = 0.5;
              ctx.lineWidth = 2;
              ctx.beginPath();
              ctx.moveTo(p.x, p.y);
              ctx.lineTo(p.x + 20, p.y);
              ctx.stroke();
              if (Math.random() < 0.03) {
                ctx.fillStyle = '#4b5563';
                ctx.globalAlpha = 0.8;
                ctx.font = '8px monospace';
                ctx.fillText('...', p.x + 5, p.y + 8);
              }
            });
          }
          // –¢—ë–º–Ω—ã–π –ü–†–ò–ù–¶ (—Ç—ë–º–Ω—ã–π –º–µ—á –Ω–∞ –∫–∞–º–Ω–µ)
          if (badgeName.includes('–¢—ë–º–Ω—ã–π –ü–†–ò–ù–¶')) {
            const p = particles[0];
            p.glow += 0.05;
            if (p.glow > Math.PI * 2) p.glow = 0;
            // –ö–∞–º–µ–Ω—å
            ctx.fillStyle = '#1e293b';
            ctx.globalAlpha = 0.8;
            ctx.beginPath();
            ctx.ellipse(centerX(), centerY() + 15, 15, 8, 0, 0, Math.PI * 2);
            ctx.fill();
            // –ú–µ—á (–ª–∏–Ω–∏—è —Å —Ä—É–∫–æ—è—Ç–∫–æ–π)
            ctx.strokeStyle = '#475569';
            ctx.lineWidth = 3;
            ctx.globalAlpha = 1;
            ctx.beginPath();
            ctx.moveTo(centerX(), centerY() - 10);
            ctx.lineTo(centerX(), centerY() + 10);
            ctx.stroke();
            // –°–≤–µ—á–µ–Ω–∏–µ –º–µ—á–∞
            ctx.globalAlpha = 0.6 + 0.4 * Math.sin(p.glow);
            ctx.strokeStyle = '#a855f7';
            ctx.lineWidth = 5;
            ctx.beginPath();
            ctx.moveTo(centerX(), centerY() - 10);
            ctx.lineTo(centerX(), centerY() + 5);
            ctx.stroke();
          }
          animationId = requestAnimationFrame(animate);
        };
        // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û
        animate();
        return () => {
          cancelAnimationFrame(animationId);
          ro.disconnect();
        };
      };

      // –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø setupBadges
      const setupBadges = () => {
        const badges = document.getElementById('badges');
        const badgeList = document.getElementById('badgeList');
        const notification = document.getElementById('appearanceNotification');
        if (!badges || !badgeList || !notification) return;
        
        let savedBadges = JSON.parse(localStorage.getItem('userBadges') || '[]');
        
        // –ê–≤—Ç–æ-–≤—ã–¥–∞—á–∞ "–§–∞–Ω–∞—Ç" –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ
        if (!savedBadges.includes('–§–∞–Ω–∞—Ç')) {
          savedBadges.push('–§–∞–Ω–∞—Ç');
          localStorage.setItem('userBadges', JSON.stringify(savedBadges));
          showNotification('–ü–æ–ª—É—á–µ–Ω –±–µ–π–¥–∂: –§–∞–Ω–∞—Ç! üéâ', notification);
        }
        
        badges.innerHTML = '';
        
        badgeDefinitions.forEach(badge => {
          // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –±–µ–π–¥–∂ "–ú–æ–±–∏–ª—å–Ω—ã–π –í–æ–∏–Ω" –Ω–∞ –ü–ö –≤–µ—Ä—Å–∏–∏
          if (badge.name === '–ú–æ–±–∏–ª—å–Ω—ã–π –í–æ–∏–Ω' && window.innerWidth > 768) {
            return;
          }
          
          const isEarned = savedBadges.includes(badge.name) || badge.earned();
          
          if (isEarned) {
            if (!savedBadges.includes(badge.name)) {
              savedBadges.push(badge.name);
              localStorage.setItem('userBadges', JSON.stringify(savedBadges));
              showNotification(`–ù–æ–≤—ã–π –±–µ–π–¥–∂: ${badge.name}! üéâ`, notification);
              gtag('event', 'badge_earned', { event_category: 'profile', event_label: badge.name });
              logAction(`–ü–æ–ª—É—á–µ–Ω –Ω–æ–≤—ã–π –±–µ–π–¥–∂: ${badge.name}`);
              triggerBadgeEffect(badge.name);
              // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å new-badge –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
              const badgeEl = document.createElement('span');
              badgeEl.className = `badge inline-flex items-center gap-1 px-2 py-1 rounded-full text-white text-xs ${badge.rarity} ${badge.name.toLowerCase().replace(/ /g, '-').replace('—ë', 'e').replace('–ø—Ä–∏–Ω—Ü', 'prince')} new-badge`;
              badgeEl.innerHTML = `<i class="${badge.icon}"></i>${badge.name}`;
              
              // –î–æ–±–∞–≤–ª—è–µ–º —á–∞—Å—Ç–∏—Ü—ã —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏—Ö –µ—â–µ –Ω–µ—Ç
              if ((badge.rarity === 'secret' || badge.rarity === 'code-breaker' || badge.rarity === 'ghost' || badge.rarity === 'night-stalker' || badge.rarity === 'epic') && !badgeEl.querySelector('canvas')) {
                createBadgeParticles(badgeEl, badge.name);
              }
              
              badges.appendChild(badgeEl);
              setTimeout(() => badgeEl.classList.remove('new-badge'), 5000);
            } else {
              const badgeEl = document.createElement('span');
              badgeEl.className = `badge inline-flex items-center gap-1 px-2 py-1 rounded-full text-white text-xs ${badge.rarity} ${badge.name.toLowerCase().replace(/ /g, '-').replace('—ë', 'e').replace('–ø—Ä–∏–Ω—Ü', 'prince')}`;
              badgeEl.innerHTML = `<i class="${badge.icon}"></i>${badge.name}`;
              
              // –î–æ–±–∞–≤–ª—è–µ–º —á–∞—Å—Ç–∏—Ü—ã —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏—Ö –µ—â–µ –Ω–µ—Ç
              if ((badge.rarity === 'secret' || badge.rarity === 'code-breaker' || badge.rarity === 'ghost' || badge.rarity === 'night-stalker' || badge.rarity === 'epic') && !badgeEl.querySelector('canvas')) {
                createBadgeParticles(badgeEl, badge.name);
              }
              
              badges.appendChild(badgeEl);
            }
          }
        });
        
        // –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏ setupBadges –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π...
        badgeList.innerHTML = '';
        badgeDefinitions.forEach((badge, index) => {
          // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –±–µ–π–¥–∂ "–ú–æ–±–∏–ª—å–Ω—ã–π –í–æ–∏–Ω" –Ω–∞ –ü–ö –≤–µ—Ä—Å–∏–∏ –≤ —Å–ø–∏—Å–∫–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –±–µ–π–¥–∂–µ–π
          if (badge.name === '–ú–æ–±–∏–ª—å–Ω—ã–π –í–æ–∏–Ω' && window.innerWidth > 768) {
            return;
          }
          
          const badgeItem = document.createElement('div');
          badgeItem.className = 'flex items-center gap-2 text-sm cursor-pointer';
          const earned = savedBadges.includes(badge.name) || badge.earned();
          let iconClass = badge.icon;
          let nameText = badge.name;
          let descText = badge.description;
          let rarityText = { common: '–û–±—ã—á–Ω—ã–π', rare: '–†–µ–¥–∫–∏–π', legendary: '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π', secret: '–°–µ–∫—Ä–µ—Ç–Ω—ã–π', 'code-breaker': '–°–µ–∫—Ä–µ—Ç–Ω—ã–π', ghost: '–°–µ–∫—Ä–µ—Ç–Ω—ã–π', 'night-stalker': '–†–µ–¥–∫–∏–π', epic: '–≠–ø–∏—á–µ—Å–∫–∏–π' }[badge.rarity] || badge.rarity;
          let textClass = earned ? 'text-slate-700 dark:text-slate-300' : 'text-slate-400 dark:text-slate-600';
          let iconColor = earned ? 'text-indigo-600 dark:text-indigo-400' : 'text-slate-400 dark:text-slate-600';
          const status = earned ? '‚úÖ' : 'üîí';
          const progress = badge.progress ? `(${badge.progress()}/${badge.name === '–ú–µ–º–æ–ª–æ–≥' ? '4' : badge.name === '–≠–ø–∏–∫ –ú–µ–º–æ–ª–æ–≥' ? '20' : '20'})` : '';
          if ((badge.rarity === 'secret' || badge.rarity === 'code-breaker' || badge.rarity === 'ghost' || badge.rarity === 'night-stalker' || badge.rarity === 'epic') && !earned) {
            iconClass = 'fa-solid fa-question-circle';
            nameText = badge.name === '–ö–æ–¥–æ–≤—ã–π –í–∑–ª–æ–º—â–∏–∫' ? '?' : badge.name === '–ù–æ—á–Ω–æ–π –°—Ç–∞–ª–∫–µ—Ä' ? '?' : badge.name === '–¢—ë–º–Ω—ã–π –ü–†–ò–ù–¶' ? '???' : '???';
            descText = '–≠—Ç–æ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ –Ω–∞—à–µ–º —Å–∞–π—Ç–µ, –∞ –º–æ–∂–µ—Ç —ç—Ç–æ –µ—Å—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏ —Å–∞–π—Ç–∞... üòà';
            rarityText = '–°–µ–∫—Ä–µ—Ç–Ω—ã–π';
          }
          badgeItem.innerHTML = `
            <i class="${iconClass} ${iconColor}"></i>
            <span class="${textClass}">${nameText} (${rarityText}): ${descText} ${progress}</span>
            <span>${status}</span>
          `;
   
          badgeList.appendChild(badgeItem);
          badgeItem.addEventListener('click', () => {
            const modal = document.getElementById('badgeModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalDesc = document.getElementById('modalDesc');
            const modalIcon = document.getElementById('modalIcon');
            const modalProgress = document.getElementById('modalProgress');
            const modalRarity = document.getElementById('modalRarity');
            if (modal && modalTitle && modalDesc && modalIcon && modalProgress && modalRarity) {
              let mTitle = badge.name;
              let mDesc = badge.description;
              let mIcon = badge.icon;
              let mProgress = badge.progress ? `–ü—Ä–æ–≥—Ä–µ—Å—Å: ${badge.progress()}/${badge.name === '–ú–µ–º–æ–ª–æ–≥' ? '4' : '50'}` : '';
              let mRarity = `–†–µ–¥–∫–æ—Å—Ç—å: ${rarityText}`;
              if ((badge.rarity === 'secret' || badge.rarity === 'code-breaker' || badge.rarity === 'ghost' || badge.rarity === 'night-stalker' || badge.rarity === 'epic') && !earned) {
                mTitle = badge.name === '–ö–æ–¥–æ–≤—ã–π –í–∑–ª–æ–º—â–∏–∫' ? '?' : badge.name === '–ù–æ—á–Ω–æ–π –°—Ç–∞–ª–∫–µ—Ä' ? '?' : badge.name === '–¢—ë–º–Ω—ã–π –ü–†–ò–ù–¶' ? '???' : '???';
                mDesc = '–≠—Ç–æ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ –Ω–∞—à–µ–º —Å–∞–π—Ç–µ, –∞ –º–æ–∂–µ—Ç —ç—Ç–æ –µ—Å—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏ —Å–∞–π—Ç–∞... üòà';
                mIcon = 'fa-solid fa-question-circle';
                mProgress = '';
                mRarity = '–†–µ–¥–∫–æ—Å—Ç—å: –°–µ–∫—Ä–µ—Ç–Ω—ã–π';
              }
              modalTitle.textContent = mTitle;
              modalDesc.innerHTML = mDesc;
              modalIcon.innerHTML = `<i class="${mIcon} text-4xl text-indigo-600 dark:text-indigo-400"></i>`;
              modalProgress.textContent = mProgress;
              modalRarity.textContent = mRarity;
              modal.style.display = 'flex';
              modal.style.animation = 'modalFadeIn 0.3s ease forwards';
              
              // –§—É–Ω–∫—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
              const closeModal = () => {
                modal.style.animation = 'modalFadeOut 0.3s ease forwards';
                setTimeout(() => {
                  modal.style.display = 'none';
                }, 300);
              };
              
              // –£–±–∏—Ä–∞–µ–º —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏ –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ
              document.getElementById('closeModal').onclick = closeModal;
              document.getElementById('closeModalBtn').onclick = closeModal;
              
              // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
              modal.onclick = (e) => {
                if (e.target === modal) {
                  closeModal();
                }
              };
            }
          });
        });
      };

      // –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π...
      const triggerBadgeEffect = (badgeName) => {
        // –£–±—Ä–∞–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç –¥–ª—è '–ö–æ–¥–æ–≤—ã–π –í–∑–ª–æ–º—â–∏–∫'
      };

      const setupGhostGesture = () => {
        let path = [];
        const tolerance = 50;
        const minPoints = 10;
        const recognizeM = (points) => {
        if (points.length < minPoints) return false;
        const xs = points.map(p => p.x);
        const ys = points.map(p => p.y);
        const minX = Math.min(...xs), maxX = Math.max(...xs);
        const minY = Math.min(...ys), maxY = Math.max(...ys);
        const w = maxX - minX;
        const h = maxY - minY;
        if (w < 50 || h < 50) return false;
        const thirdsX = [minX + w/3, minX + 2*w/3];
        const halfY = minY + h/2;
        const leftUp = points.some(p => p.x < thirdsX[0] && p.y < halfY);
        const leftDown = points.some(p => p.x < thirdsX[0] && p.y > halfY);
        const midDown = points.some(p => p.x > thirdsX[0] && p.x < thirdsX[1] && p.y > halfY);
        const rightUp = points.some(p => p.x > thirdsX[1] && p.y < halfY);
        const rightDown = points.some(p => p.x > thirdsX[1] && p.y > halfY);
        return leftUp && leftDown && midDown && rightUp && rightDown;
      };
        const handleStart = (e) => {
          path = [];
          const addPoint = (clientX, clientY) => {
            path.push({ x: clientX, y: clientY });
          };
          const handleMove = (e) => {
            const touch = e.touches ? e.touches[0] : e;
            addPoint(touch.clientX, touch.clientY);
          };
          const handleEnd = () => {
            if (recognizeM(path)) {
              localStorage.setItem('ghostScrolls', '3');
              localStorage.setItem('ghostScrollsEarned', 'true');
              checkBadgeConditions();
              showNotification('–ü—Ä–∏–∑—Ä–∞—á–Ω—ã–π —Ä–µ–∂–∏–º –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! –ë–µ–π–¥–∂ –ø–æ–ª—É—á–µ–Ω! üëª', document.getElementById('appearanceNotification'));
            }
            document.removeEventListener('mousemove', handleMove);
            document.removeEventListener('touchmove', handleMove);
            document.removeEventListener('mouseup', handleEnd);
            document.removeEventListener('touchend', handleEnd);
          };
          document.addEventListener('mousemove', handleMove);
          document.addEventListener('touchmove', handleMove, { passive: true });
          document.addEventListener('mouseup', handleEnd);
          document.addEventListener('touchend', handleEnd);
        };
        document.addEventListener('mousedown', handleStart);
        document.addEventListener('touchstart', handleStart, { passive: true });
      };

      const setupResetProfile = () => {
        const resetProfileButton = document.getElementById('resetProfile');
        const notification = document.getElementById('appearanceNotification');
        if (resetProfileButton && notification) {
          resetProfileButton.addEventListener('click', () => {
            const confirmReset = confirm(
              '‚ö†Ô∏è –¢–æ—á–Ω–æ —Å–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å?\n\n' +
              '‚Ä¢ –ê–≤–∞—Ç–∞—Ä –∏ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n' +
              '‚Ä¢ –í—Å–µ –±–µ–π–¥–∂–∏\n' +
              '‚Ä¢ –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ (–¥–ª—è –±–µ–π–¥–∂–µ–π)\n\n' +
              '–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –ù–ï–õ–¨–ó–Ø –æ—Ç–º–µ–Ω–∏—Ç—å! –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∞–π—Ç–∞ –æ—Å—Ç–∞–Ω—É—Ç—Å—è –Ω–µ—Ç—Ä–æ–Ω—É—Ç—ã–º–∏.'
            );
            if (!confirmReset) {
              showNotification('–°–±—Ä–æ—Å –ø—Ä–æ—Ñ–∏–ª—è –æ—Ç–º–µ–Ω—ë–Ω', notification);
              return;
            }
            localStorage.removeItem('userAvatar');
            localStorage.removeItem('userBadges');
            localStorage.removeItem('username');
            localStorage.removeItem('secretClicks');
            localStorage.removeItem('mortis_hacker');
            localStorage.removeItem('ghostScrolls');
            localStorage.removeItem('ghostScrollsEarned');
            localStorage.removeItem('speed_reader');
            localStorage.removeItem('mobile_views');
            localStorage.removeItem('dark_prince');
            const userAvatar = document.getElementById('userAvatar');
            const usernameInput = document.getElementById('usernameInput');
            const badges = document.getElementById('badges');
            const badgeList = document.getElementById('badgeList');
            if (userAvatar) userAvatar.src = '/assets/fallback.jpg';
            if (usernameInput) usernameInput.value = '';
            if (badges) badges.innerHTML = '';
            if (badgeList) badgeList.innerHTML = '';
            setupBadges();
            showNotification('–ü—Ä–æ—Ñ–∏–ª—å —Å–±—Ä–æ—à–µ–Ω ‚Äî –Ω–∞—á–∏–Ω–∞–π –∑–∞–Ω–æ–≤–æ! üòé', notification);
            gtag('event', 'reset_profile', { event_category: 'profile', event_label: 'confirmed_reset' });
            logAction('–ü—Ä–æ—Ñ–∏–ª—å —Å–±—Ä–æ—à–µ–Ω (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ)');
          });
        }
      };

      const setupProfileBetaNotice = () => {
        const notice = document.getElementById('profileBetaNotice');
        if (!notice) return;
        const hidden = localStorage.getItem('profileBetaNoticeHidden');
        if (!hidden) {
          notice.classList.add('show');
          notice.querySelector('button').addEventListener('click', () => {
            notice.classList.remove('show');
            localStorage.setItem('profileBetaNoticeHidden', 'true');
          });
        }
      };

      const setupProfile = () => {
        const avatarUpload = document.getElementById('avatarUpload');
        const userAvatar = document.getElementById('userAvatar');
        const usernameInput = document.getElementById('usernameInput');
        const badges = document.getElementById('badges');
        const badgeList = document.getElementById('badgeList');
        const notification = document.getElementById('appearanceNotification');
        if (avatarUpload && userAvatar && notification) {
          const savedAvatar = localStorage.getItem('userAvatar');
          if (savedAvatar) userAvatar.src = savedAvatar;
          avatarUpload.addEventListener('change', () => {
            const file = avatarUpload.files[0];
            if (file && file.size <= 1024 * 1024 && /^image\/(jpeg|png|gif|webp)$/.test(file.type)) {
              const reader = new FileReader();
              reader.onload = () => {
                const img = new Image();
                img.src = reader.result;
                img.onload = () => {
                  const canvas = document.createElement('canvas');
                  const ctx = canvas.getContext('2d');
                  const maxSize = 100;
                  let width = img.width;
                  let height = img.height;
                  if (width > height && width > maxSize) {
                    height *= maxSize / width;
                    width = maxSize;
                  } else if (height > maxSize) {
                    width *= maxSize / height;
                    height = maxSize;
                  }
                  canvas.width = width;
                  canvas.height = height;
                  ctx.drawImage(img, 0, 0, width, height);
                  const compressed = canvas.toDataURL('image/jpeg', 0.8);
                  userAvatar.src = compressed;
                  localStorage.setItem('userAvatar', compressed);
                  showNotification('–ê–≤–∞—Ç–∞—Ä –æ–±–Ω–æ–≤–ª—ë–Ω', notification);
                  gtag('event', 'avatar_upload', { event_category: 'profile', event_label: 'avatar_updated' });
                  logAction('–ê–≤–∞—Ç–∞—Ä –æ–±–Ω–æ–≤–ª—ë–Ω');
                  checkBadgeConditions();
                };
              };
              reader.readAsDataURL(file);
            } else {
              showNotification('–í—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (JPEG, PNG, GIF, WebP, –¥–æ 1–ú–ë)', notification);
              logAction('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–≤–∞—Ç–∞—Ä–∞: –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∏–ª–∏ —Ä–∞–∑–º–µ—Ä');
            }
          });
        }
        if (usernameInput && notification) {
          const savedUsername = localStorage.getItem('username');
          if (savedUsername) usernameInput.value = savedUsername;
          usernameInput.addEventListener('input', debounce(() => {
            const username = usernameInput.value.trim();
            if (username.length <= 20) {
              localStorage.setItem('username', username);
              showNotification('–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–æ', notification);
              gtag('event', 'username_update', { event_category: 'profile', event_label: 'username_updated' });
              logAction(`–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–æ: ${username}`);
              checkBadgeConditions();
            } else {
              showNotification('–ò–º—è –Ω–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–µ–≤—ã—à–∞—Ç—å 20 —Å–∏–º–≤–æ–ª–æ–≤', notification);
              logAction('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–º–µ–Ω–∏: –ø—Ä–µ–≤—ã—à–µ–Ω–∞ –¥–ª–∏–Ω–∞');
            }
          }, 500));
        }
        if (badges && badgeList) {
          setupBadges();
        }
        window.resetBadges = () => {
          localStorage.removeItem('userBadges');
          setupBadges();
          logAction('–ë–µ–π–¥–∂–∏ —Å–±—Ä–æ—à–µ–Ω—ã —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å');
        };
      };

      const badgeDefinitions = [
        { name: '–§–∞–Ω–∞—Ç', icon: 'fa-solid fa-star', description: '–í—ã–¥–∞—ë—Ç—Å—è –∑–∞ –ø–æ—Å–µ—â–µ–Ω–∏–µ —Å–∞–π—Ç–∞!', earned: () => true, rarity: 'common' },
        {
          name: '–ù–æ—á–Ω–æ–π –°—Ç–∞–ª–∫–µ—Ä',
          icon: 'fa-solid fa-users',
          description: '–ü–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ Telegram-–∫–∞–Ω–∞–ª –∏ –Ω–∞–ø–∏—à–∏ –≤ –ª–∏—á–∫—É –Ω–æ—á—å—é',
          earned: () => localStorage.getItem('social_subscribed') === 'true',
          rarity: 'night-stalker'
        },
        { name: '–°—Ç—Ä–∏–º–µ—Ä', icon: 'fa-solid fa-video', description: '–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞–≤–∞—Ç–∞—Ä –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', earned: () => {
          return !!localStorage.getItem('userAvatar') && !!localStorage.getItem('username');
        }, rarity: 'common' },
        {
          name: '–ò–≥—Ä–æ–≤–æ–π –≠–∫—Å–ø–µ—Ä—Ç',
          icon: 'fa-solid fa-gamepad',
          description: '–°—ã–≥—Ä–∞–π –≤ 3 –∏–≥—Ä—ã –Ω–∞ —Å–∞–π—Ç–µ',
          earned: () => localStorage.getItem('games_played') >= '3',
          rarity: 'rare'
        },
        {
          name: '2048 –ú–∞—Å—Ç–µ—Ä',
          icon: 'fa-solid fa-trophy',
          description: '–°–æ–±–µ—Ä–∏ –ø–ª–∏—Ç–∫—É 2048 –≤ –∏–≥—Ä–µ!',
          earned: () => localStorage.getItem('badge_2048_master') === 'true',
          rarity: 'legendary'
        },
        {
        name: '–ú–µ–≥–∞ –§–∞–Ω–∞—Ç',
        icon: 'fa-solid fa-heart',
        description: '–ü–æ—Å–µ—Ç–∏ –≤—Å–µ —Ä–∞–∑–¥–µ–ª—ã —Å–∞–π—Ç–∞ 5 —Ä–∞–∑',
        earned: () => localStorage.getItem('sections_visited') >= '25',
        rarity: 'legendary'
      },
        {
          name: '–õ–µ–≥–µ–Ω–¥–∞',
          icon: 'fa-solid fa-crown',
          description: '–ü–æ–ª—É—á–∏ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –±–µ–π–¥–∂–∏',
          earned: () => {
            const saved = JSON.parse(localStorage.getItem('userBadges') || '[]');
            return ['–§–∞–Ω–∞—Ç', '–ù–æ—á–Ω–æ–π –°—Ç–∞–ª–∫–µ—Ä', '–°—Ç—Ä–∏–º–µ—Ä', '–ò–≥—Ä–æ–≤–æ–π –≠–∫—Å–ø–µ—Ä—Ç', '2048 –ú–∞—Å—Ç–µ—Ä', '–ú–µ–≥–∞ –§–∞–Ω–∞—Ç', '–°–∫–æ—Ä–æ—Å—Ç–Ω–æ–π –ß–∏—Ç–∞—Ç–µ–ª—å', '–ú–æ–±–∏–ª—å–Ω—ã–π –í–æ–∏–Ω', '–¢—ë–º–Ω—ã–π –ü–†–ò–ù–¶', '–í–∏–¥–µ–æ –ú–∞–Ω—å—è–∫', 'Rutube Fan'].every(b => saved.includes(b));
          },
          rarity: 'legendary'
        },
        { name: '–°–µ–∫—Ä–µ—Ç–Ω—ã–π –ê–≥–µ–Ω—Ç', icon: 'fa-solid fa-user-secret', description: '–°–µ–∫—Ä–µ—Ç–Ω—ã–π –±–µ–π–¥–∂! –ö–∞–∫ –≤—ã –µ–≥–æ –Ω–∞—à–ª–∏?', earned: () => {
          return parseInt(localStorage.getItem('secretClicks') || '0') >= 5;
        }, rarity: 'secret' },
        { name: '–ö–æ–¥–æ–≤—ã–π –í–∑–ª–æ–º—â–∏–∫', icon: 'fa-solid fa-terminal', description: '–≠—Ç–æ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ –Ω–∞—à–µ–º —Å–∞–π—Ç–µ, –∞ –º–æ–∂–µ—Ç —ç—Ç–æ –µ—Å—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏ —Å–∞–π—Ç–∞... üòà', earned: () => {
          return localStorage.getItem('mortis_hacker') === 'true';
        }, rarity: 'code-breaker' },
        {
          name: '–ü—Ä–∏–∑—Ä–∞—á–Ω—ã–π –ó—Ä–∏—Ç–µ–ª—å',
          icon: 'fa-solid fa-ghost',
          description: '–ù–∞—Ä–∏—Å—É–π –±—É–∫–≤—É "M" –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–∞–ª—å—Ü–µ–º –∏–ª–∏ –º—ã—à—å—é',
          earned: () => localStorage.getItem('ghostScrollsEarned') === 'true',
          rarity: 'secret'
        },
        {
          name: '–°–∫–æ—Ä–æ—Å—Ç–Ω–æ–π –ß–∏—Ç–∞—Ç–µ–ª—å',
          icon: 'fa-solid fa-book-open-reader',
          description: '–ü—Ä–æ—á–∏—Ç–∞–π –≤—Å–µ –Ω–æ–≤–æ—Å—Ç–∏ –∑–∞ –º–∏–Ω—É—Ç—É',
          earned: () => localStorage.getItem('speed_reader') === 'true',
          rarity: 'rare'
        },
        {
          name: '–ú–æ–±–∏–ª—å–Ω—ã–π –í–æ–∏–Ω',
          icon: 'fa-solid fa-mobile-screen-button',
          description: '–ü—Ä–æ—Å–º–æ—Ç—Ä —Å –º–æ–±–∏–ª—å–Ω–æ–≥–æ 10 —Ä–∞–∑',
          earned: () => {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–µ–π–¥–∂ —Ç–æ–ª—å–∫–æ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
            if (window.innerWidth > 768) return false; // –°–∫—Ä—ã–≤–∞–µ–º –Ω–∞ –ü–ö
            return localStorage.getItem('mobile_views') >= '10';
          },
          rarity: 'common'
        },
        {
          name: '–¢—ë–º–Ω—ã–π –ü–†–ò–ù–¶',
          icon: 'fa-solid fa-crown',
          description: '–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –¢—ë–º–Ω—ã–π –ú–∞—Å—Ç–µ—Ä',
          earned: () => localStorage.getItem('dark_prince') === 'true',
          rarity: 'epic'
        },
        {
          name: '–í–∏–¥–µ–æ –ú–∞–Ω—å—è–∫',
          icon: 'fa-solid fa-video',
          description: '–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å 10 –≤–∏–¥–µ–æ –≤ —Ä–∞–∑–¥–µ–ª–µ "–í–∏–¥–µ–æ"',
          earned: () => localStorage.getItem('video_views') >= '10',
          rarity: 'rare'
        },
        {
          name: 'Rutube Fan',
          icon: 'fa-solid fa-play-circle',
          description: '–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –≤–∏–¥–µ–æ —Å Rutube',
          earned: () => localStorage.getItem('rutube_views') >= '3',
          rarity: 'common'
        }
      ];

      const setupSecretBadgeTrigger = () => {
        const logo = document.querySelector('a[href="#welcome"] img');
        if (logo) {
          let clicks = parseInt(localStorage.getItem('secretClicks') || '0');
          logo.addEventListener('click', () => {
            clicks++;
            localStorage.setItem('secretClicks', clicks);
            if (clicks >= 5) {
              checkBadgeConditions();
            }
          });
        }
      };

      const checkBadgeConditions = () => {
        setupBadges();
      };

      const newsData = [
        { title: "–ó–ò–ú–ê –£–ñ–ï –†–Ø–î–û–ú.", date: "28 –Ω–æ—è–±—Ä—è", content: "–ó–∏–º–Ω—è—è –æ–±–Ω–æ–≤–∞ –Ω–∞ –º–µ—Å—Ç–µ! –ê –∑–Ω–∞—á–∏—Ç –∏ –Ω–æ–≤—ã–µ —Ñ–∏—à–∫–∏: –ù–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª, –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–æ —Å–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ –ù–û–í–û–ì–û–î–ù–Ø–Ø –¢–†–ê–î–ò–¶–ò–Ø, —ç—Ç–æ –ò–¢–û–ì–ò –ì–û–î–ê! –ö–∞–∫ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —ç—Ç–∞ –∫–Ω–æ–ø–∫–∞: –ü–µ—Ä–µ—Ö–æ–¥—è –ø–æ –Ω–µ–π, –≤—ã —É–≤–∏–¥–∏—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —á–µ—Ä–µ–∑ —á—Ç–æ –º—ã –ø—Ä–æ—à–ª–∏) –≠—Ç–∞ –∫–Ω–æ–ø–∫–∞ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –¥–æ–ª–≥–æ. –¢–µ–ø–µ—Ä—å –∫ —Ä–∞–∑–¥–µ–ª—É: –ú—ã –≤—ã–∫–∞—Ç—ã–≤–∞–µ–º –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é —Ä–∞–∑–¥–µ–ª–∞ –í–∏–¥–µ–æ! –ù–æ —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –≤–∏–¥–æ—Å–æ–≤ –º–Ω–æ–≥–æ, –ø–æ–∫–∞ —á—Ç–æ –¥–æ–±–∞–≤–∏–º 12 –≤–∏–¥–æ—Å–æ–≤ –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –ø–æ–¥–µ–ª–µ–Ω—ã –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏. –ï—Å–ª–∏ –≤—ã —Å—Ç–æ–ª–∫–Ω—ë—Ç–µ—Å—å —Å –ø—Ä–æ–±–ª–µ–º–æ–π –Ω–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ –≤ Telegram –∏ –º—ã —Ä–∞–∑–±–µ—Ä–µ–º—Å—è —Å —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º–æ–π. –ù—É –∏ –Ω–∞ —ç—Ç–æ–º –≤—Å—ë, —Å–∫–æ—Ä–æ –≤ –Ω–æ–≤–æ–º –≥–æ–¥—É –∑–∞–≤–µ–∑–µ–º –µ—â—ë –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—é—Ä–ø—Ä–∏–∑–æ–≤)" },
        { title: "–†–∞–∑–¥–µ–ª '–í–∏–¥–µ–æ' –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ!", date: "18 –Ω–æ—è–±—Ä—è", content: "–†–∞–Ω—å—à–µ –Ω–∞–º –ø—Ä–∏—à–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª, —Ç–µ–ø–µ—Ä—å –º—ã –µ–≥–æ –æ–±–Ω–æ–≤–∏–ª–∏ –±–ª–∞–≥–æ–¥–∞—Ä—è –Ω–æ–≤–æ–º—É —Å—Ç–∏–ª—é —Å–∞–π—Ç–∞! –í —Ä–∞–∑–¥–µ–ª–µ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –Ω–∞ –∫–∞–∫–æ–º —Å–µ–π—á–∞—Å —ç—Ç–∞–ø–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Ä–∞–∑–¥–µ–ª ?_? –¢–∞–∫–∂–µ –º—ã —Å–º–µ–Ω–∏–ª–∏ –æ–±—ã—á–Ω—ã–π —Ñ–æ–Ω –Ω–∞ –∑–∏–º–Ω–∏–π –≤–∞–π–±! –í –¥–µ–∫–∞–±—Ä–µ —Ñ–æ–Ω —Å–º–µ–Ω–∏—Ç—Å—è –∏ –≤ —Ü–µ–ª–æ–º –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞. –ü–æ–∫–∞ —á—Ç–æ –Ω–∞ —ç—Ç–æ–º –≤—Å—ë, —Å–∫–æ—Ä–æ –≤ –¥–µ–∫–∞–±—Ä–µ –º—ã –µ—â—ë —Å –≤–∞–º–∏ –≤—Å—Ç—Ä–µ—Ç–∏–º—Å—è!" },
        { title: "Mortis Games! ", date: "6 –Ω–æ—è–±—Ä—è", content: "–î–∞ –¥–∞, –≤—ã –Ω–µ —É—Å–ª—ã—à–∞–ª–∏, –∏–≥—Ä—ã –æ—Ç Mortis –û–¢–ö–†–´–¢–´! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞ –Ω–∞—à–µ–º —Å–∞–π—Ç–µ –∏–≥—Ä–∞—Ç—å –≤ –∏–≥—Ä—ã —Ç—É –¥–ª—è —É –≤–∞—Å –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ –Ω–∞–ª–∏—á–∏–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç! –¢–∞–∫–∂–µ –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∏–≥—Ä—É —Ç—É, –∫–æ—Ç–æ—Ä—É—é –≤—ã —Ö–æ—Ç–∏—Ç–µ, –∞ –º—ã –µ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–µ–º –∏ –¥–æ–±–∞–≤–∏–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –±–µ–π–¥–∂–∏–∫) –¢–∞–∫–∂–µ –º—ã –ø–æ—Ñ–∏–∫—Å–∏–ª–∏ –±–∞–≥–∏ –Ω–∞ —Å–∞–π—Ç–µ –¥–ª—è –º–æ–±–∏–ª–æ–∫ –∏ –ø—Ä–æ—á–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è. –í —Å–∫–æ—Ä–æ–º –≤—Ä–µ–º–µ–Ω–∏ –º—ã –µ—â—ë –∫—É—á—É –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∏–≥—Ä –∑–∞–≤–µ–∑—ë–º –∏ –Ω–µ —Ç–æ–ª—å–∫–æ! ;)" },
        { title: "–†–∞–∑–¥–µ–ª –ü—Ä–æ—Ñ–∏–ª—å –∏ —Å–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π ", date: "29 –æ–∫—Ç—è–±—Ä—è 2025", content: "–ò—Ç–∞–∫, –º—ã –¥–æ–±–∞–≤–∏–ª–∏ –Ω–∞ —Å–∞–π—Ç –ø—Ä–æ—Ñ–∏–ª—å –∏ –∞—á–∏–≤–∫–∏, —Å –ø–æ–º–æ—â—å—é –∞—á–∏–≤–æ–∫ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–∫–∞–∑–∞—Ç—å —Å–≤–æ—ë –Ω–∞—Å—Ç–æ—è—â–µ–µ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–æ! –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –∫–∞–∫ –∏—Ö –ø–æ–ª—É—á–∞—Ç—å? –í—ã –º–æ–∂–µ—Ç–µ –≥–ª—è–Ω—É—Ç—å —Ä–∞–∑–¥–µ–ª FAQ –∏–ª–∏ –≤ —Ä–∞–∑–¥–µ–ª–µ –ø—Ä–æ—Ñ–∏–ª—å –≥–ª—è–Ω—É—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ –∞—á–∏–≤–æ–∫. –ù–∞ —Å–µ–≥–æ–¥–Ω—è –≤—Å—ë, —Å–∫–æ—Ä–æ –º—ã –∑–∞–ª—å—ë–º –µ—â–µ –ø–∞—Ä—É –≥—Ä—è–¥—É—â–∏—Ö –Ω–æ–≤–∏–Ω–æ–∫ –Ω–∞ —Å–∞–π—Ç) " },
        { title: "–û–±–Ω–æ–≤–∏–ª–∏ –Ω–µ–º–Ω–æ–≥–æ —Å–∞–π—Ç", date: "25 —Å–µ–Ω—Ç—è–±—Ä—è 2025", content: "–í–µ—Ä–Ω—É–ª–∏ —É–∑–æ—Ä—ã –Ω–∞ —Å–∞–π—Ç, —Ç–∞–∫–∂–µ –æ–±–Ω–æ–≤–∏–ª–∏ —á—É—Ç—å —á—É—Ç—å –¥–∏–∑–∞–π–Ω –∏ –æ–±–Ω–æ–≤–∏–ª–∏ –±–æ—Ç–∞. –¢–∞–∫–∂–µ, —Å–æ–æ–±—â–∞–µ–º –≤–∞–º –Ω–æ–≤–æ—Å—Ç—å –æ —Ç–æ–º, —á—Ç–æ —Å–∞–π—Ç –Ω–µ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–∞, –≤–µ–¥—å –º—ã —Å–µ–π—á–∞—Å –Ω–∞—á–Ω–µ–º –∑–∞–Ω–∏–º–∞—Ç—å—Å—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º –ø–æ—ç—Ç–æ–º—É –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ—Ç–æ—Ä—ã–µ —É –≤–∞—Å –ø–æ–ø–∞–¥—É—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ, –±—É–¥—É—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –º—ã –∑–∞–∫–æ–Ω—á–∏–º —Å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º, –µ—Å–ª–∏ –≤—ã –≤—ã –æ–±–Ω–∞—Ä—É–∂–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –Ω–∞ —Å–∞–π—Ç–µ, –ø–∏—à–∏—Ç–µ –≤ Telegram: <a href=\"https://t.me/dimap7221\" class=\"underline text-indigo-600 dark:text-indigo-400\" rel=\"noopener\">MortisPlay</a>. –ü—Ä–∏—è—Ç–Ω–æ–≥–æ –≤—Ä–µ–º—è–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ –Ω–∞ —Å–∞–π—Ç–µ :3" },
        { title: "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ä—ã–≤ –∑–∞–≤–µ—Ä—à—ë–Ω!", date: "22 —Å–µ–Ω—Ç—è–±—Ä—è 2025", content: "–ô–æ—É, –≥–µ–π–º–µ—Ä—ã! üéÆüî• –°–∞–π—Ç Mortis Play –≤–µ—Ä–Ω—É–ª—Å—è! –ü—Ä–æ–≤–µ—Ä—å –Ω–æ–≤—ã–µ —Ñ–∏—á–∏, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ Q&A. –ü–∏—à–∏ –≤–æ–ø—Ä–æ—Å—ã –±–æ—Ç—É: <a href=\"https://t.me/MortisplayQABot\" class=\"underline text-indigo-600 dark:text-indigo-400\" rel=\"noopener\">MortisplayQABot</a>. –°–ª–µ–¥–∏ –∑–∞ –Ω–æ–≤–æ—Å—Ç—è–º–∏ –≤ Telegram: <a href=\"https://t.me/MortisPlayTG\" class=\"underline text-indigo-600 dark:text-indigo-400\" rel=\"noopener\">@MortisPlayTG</a>." },
        { title: "–ù–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª ¬´–ù–∞—Å—Ç—Ä–æ–π–∫–∏¬ª –∏ –±–æ—Ç –≥–æ—Ç–æ–≤!", date: "18 —Å–µ–Ω—Ç—è–±—Ä—è 2025", content: "–ô–æ—É, –≥–µ–π–º–µ—Ä—ã! üéÆüî• –ù–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª ¬´–ù–∞—Å—Ç—Ä–æ–π–∫–∏¬ª —É–∂–µ –Ω–∞ —Å–∞–π—Ç–µ ‚Äî –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–π —Ç–µ–º—É, —à—Ä–∏—Ñ—Ç—ã –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å! –í –±—É–¥—É—â–µ–º –¥–æ–±–∞–≤–∏–º –µ—â—ë –±–æ–ª—å—à–µ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–π. üòé –ü–ª—é—Å, –Ω–∞—à –±–æ—Ç –∑–∞–∫–æ–Ω—á–µ–Ω –∏ –∂–¥—ë—Ç –≤–æ–ø—Ä–æ—Å–æ–≤: <a href=\"https://t.me/MortisplayQABot\" class=\"underline text-indigo-600 dark:text-indigo-400\" rel=\"noopener\">MortisplayQABot</a>." },
        { title: "Q&A –æ—Ç–∫—Ä—ã—Ç!", date: "15 —Å–µ–Ω—Ç—è–±—Ä—è 2025", content: "–ô–æ—É, –≥–µ–π–º–µ—Ä—ã! üéÆüî• Q&A —Å—Ç–∞—Ä—Ç–æ–≤–∞–ª! –ü–∏—à–∏ –≤–æ–ø—Ä–æ—Å—ã –≤ Telegram: <a href=\"https://t.me/MortisplayQABot\" class=\"underline text-indigo-600 dark:text-indigo-400\" rel=\"noopener\">MortisplayQABot</a>. –†–∞–∑–¥–µ–ª ¬´–í–∏–¥–µ–æ¬ª —Ç–µ–ø–µ—Ä—å —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ (–í—Å–µ, –°—Ç—Ä–∏–º—ã, –£–≥–∞—Ä). ¬´FAQ¬ª –ø–µ—Ä–µ–µ—Ö–∞–ª –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É. ¬´–ë–∏–æ–≥—Ä–∞—Ñ–∏—è¬ª –ø–æ–ª—É—á–∏–ª–∞ –Ω–æ–≤—ã–π —Å—Ç–∏–ª—å –∏ –ø–ª–µ–π–ª–∏—Å—Ç! üî•" },
        { title: "–£–ª—É—á—à–µ–Ω–∞ –ë–∏–æ–≥—Ä–∞—Ñ–∏—è!", date: "10 —Å–µ–Ω—Ç—è–±—Ä—è 2025", content: "–ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ë–∏–æ–≥—Ä–∞—Ñ–∏–∏! –ë–æ–ª—å—à–µ –¥–µ—Ç–∞–ª–µ–π –æ –º–æ—ë–º –ø—É—Ç–∏ –∏ –ø–ª–∞–Ω–∞—Ö. –ü—Ä–æ–≤–µ—Ä—å –ø–æ –∫–Ω–æ–ø–∫–µ \"–ë–∏–æ–≥—Ä–∞—Ñ–∏—è\"! üòé" },
        { title: "–†–µ–¥–∏–∑–∞–π–Ω —Å–∞–π—Ç–∞!", date: "19 –∞–≤–≥—É—Å—Ç–∞ 2025", content: "–ù–æ–≤—ã–π –¥–∏–∑–∞–π–Ω —Å–∞–π—Ç–∞: –∫—Ä–∞—Å–∏–≤—ã–π, —É–Ω–∏–∫–∞–ª—å–Ω—ã–π, –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π! –û—Ü–µ–Ω–∏ –∏ —Å–ª–µ–¥–∏ –∑–∞ –∞–ø–¥–µ–π—Ç–∞–º–∏! üòé" },
        { title: "–§–æ—Ä—É–º –≤—Ä–µ–º–µ–Ω–Ω–æ —É–±—Ä–∞–Ω", date: "27 –∏—é–ª—è 2025", content: "–°–ø–∞–º-–±–æ—Ç—ã –∞—Ç–∞–∫–æ–≤–∞–ª–∏ —Ñ–æ—Ä—É–º, –ø–æ—ç—Ç–æ–º—É –º—ã –µ–≥–æ –≤—Ä–µ–º–µ–Ω–Ω–æ —É–±—Ä–∞–ª–∏. –ü–ª–∞–Ω–∏—Ä—É–µ–º –≤–µ—Ä–Ω—É—Ç—å –≤ –∞–≤–≥—É—Å—Ç–µ —Å –Ω–æ–≤—ã–º –¥–∏–∑–∞–π–Ω–æ–º! –í–æ–ø—Ä–æ—Å—ã –ø–æ–∫–∞ –≤ Telegram: <a href=\"https://t.me/MortisplayQABot\" class=\"underline text-indigo-600 dark:text-indigo-400\" rel=\"noopener\">MortisplayQABot</a>." },
        { title: "–ù–æ–≤—ã–µ –º–µ–º—ã!", date: "16 –∏—é–ª—è 2025", content: "–î–æ–±–∞–≤–∏–ª–∏ 7 –Ω–æ–≤—ã—Ö –º–µ–º–æ–≤! –ü—Ä–æ–≤–µ—Ä—å –Ω–∞ —Å–∞–π—Ç–µ –∏ —É–¥–∏–≤–∏ –¥—Ä—É–∑–µ–π! üòã" }
      ];

      const setupNews = () => {
        const grid = document.getElementById('newsGrid');
        const loadMore = document.getElementById('loadMoreNews');
        let page = 1;
        const perPage = 3;
        const renderNews = (append = false) => {
          if (!append) {
            grid.innerHTML = '';
            page = 1;
          }
          const start = (page - 1) * perPage;
          const end = start + perPage;
          const items = newsData.slice(start, end);
          items.forEach(item => {
            const article = document.createElement('article');
            article.className = 'glass-card p-6 fade-in';
            article.innerHTML = `
              <h3 class="text-lg font-semibold text-purple-300">${item.title}</h3>
              <p class="mt-2 text-sm text-gray-300">${item.content}</p>
              <p class="mt-3 text-xs text-gray-400">–° –ª—é–±–æ–≤—å—é Mortis32 &lt;3 ¬∑ ${item.date}</p>
            `;
            grid.appendChild(article);
          });
          loadMore.style.display = end >= newsData.length ? 'none' : 'inline-flex';
          setupFadeIn(); // ‚Üê –§–∏–∫—Å: –∞–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –Ω–æ–≤—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
        };
        loadMore.addEventListener('click', () => {
          page++;
          renderNews(true);
        });
        renderNews();
      };

      // –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –í–°–¢–†–ê–ò–í–ê–ù–ò–Ø –ü–õ–ï–ï–†–ê RUTUBE
      const setupVideoPlayers = () => {
        // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
        document.querySelectorAll('.play-embed-btn').forEach(btn => {
          btn.replaceWith(btn.cloneNode(true));
        });

        // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
        document.querySelectorAll('.play-embed-btn').forEach(btn => {
          btn.addEventListener('click', function(e) {
            e.preventDefault();
            const embedUrl = this.getAttribute('data-embed-url');
            const videoCard = this.closest('.glass-card');
            const videoId = videoCard.querySelector('[data-video-id]').getAttribute('data-video-id');
            const playerContainer = document.getElementById(`player-${videoId}`);
            
            console.log('–ö–Ω–æ–ø–∫–∞ –Ω–∞–∂–∞—Ç–∞, videoId:', videoId, 'embedUrl:', embedUrl); // –î–ª—è –æ—Ç–ª–∞–¥–∫–∏
            
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –¥—Ä—É–≥–∏–µ –ø–ª–µ–µ—Ä—ã
            document.querySelectorAll('[id^="player-"]').forEach(container => {
              if (container.id !== `player-${videoId}`) {
                container.classList.add('hidden');
                container.innerHTML = '';
              }
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π –ø–ª–µ–µ—Ä
            if (playerContainer.classList.contains('hidden')) {
              playerContainer.innerHTML = `
                <iframe 
                  src="${embedUrl}" 
                  frameborder="0" 
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                  allowfullscreen
                  class="w-full h-64 rounded-lg"
                ></iframe>
                <button class="mt-2 neon-btn w-full close-player-btn" data-video-id="${videoId}">
                  <i class="fa-solid fa-times mr-2"></i>–°–∫—Ä—ã—Ç—å –≤–∏–¥–µ–æ
                </button>
              `;
              playerContainer.classList.remove('hidden');
              
              // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –ø–ª–µ–µ—Ä—É
              playerContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
              
              // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
              trackVideoView('embedded', 'rutube');
              
              // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è
              const closeBtn = playerContainer.querySelector('.close-player-btn');
              if (closeBtn) {
                closeBtn.addEventListener('click', function(e) {
                  e.preventDefault();
                  playerContainer.classList.add('hidden');
                  playerContainer.innerHTML = '';
                });
              }
            } else {
              playerContainer.classList.add('hidden');
              playerContainer.innerHTML = '';
            }
          });
        });
      };

      // –ù–û–í–ê–Ø –§–£–ù–ö–¶–ò–Ø: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ
      const setupVideoSearchAndFilter = () => {
        const videoSearch = document.getElementById('videoSearch');
        const categoryFilter = document.getElementById('categoryFilter');
        const resetFilters = document.getElementById('resetFilters');
        const videoList = document.getElementById('videoList');
        const noVideosMessage = document.getElementById('noVideosMessage');
        const loadMoreVideosContainer = document.getElementById('loadMoreVideosContainer');
        const loadMoreVideos = document.getElementById('loadMoreVideos');
        
        // –î–ê–ù–ù–´–ï –í–ò–î–ï–û –¢–û–õ–¨–ö–û –° RUTUBE
        const allVideoData = [
          { 
            id: 1, 
            title: "CS2 –ù–û –≠–¢–û –£–ì–ê–† –° –¢–ò–ú–ï–ô–¢–ê–ú–ò! | mortis32 –ª—É—á—à–µ–µ", 
            category: "—É–≥–∞—Ä", 
            views: "33", 
            duration: "7:23", 
            thumbnail: "/preview/preview1.jpg", 
            platform: "rutube", 
            url: "https://rutube.ru/video/b292141cd870aaec3a38f350f3a0114e/",
            embedUrl: "https://rutube.ru/play/embed/b292141cd870aaec3a38f350f3a0114e"
          },
          { 
            id: 2, 
            title: "–ù–û–í–ê–Ø –í–ï–ë–ö–ê, –ù–û–í–´–ï –ì–û–†–ò–ó–û–ù–¢–´!", 
            category: "—É–≥–∞—Ä", 
            views: "15", 
            duration: "16:07", 
            thumbnail: "/preview/preview2.jpg", 
            platform: "rutube", 
            url: "https://rutube.ru/video/36faf3fd0b2c5dac09f907297925db41/",
            embedUrl: "https://rutube.ru/play/embed/36faf3fd0b2c5dac09f907297925db41/"
          },
          { 
            id: 3, 
            title: "Mortisplay32 –ò–ì–†–ê–ï–¢ –í COUNTER STRIKE 2 #1 (ft. Johnny_Drill) mortis32 –ª—É—á—à–µ–µ", 
            category: "—Å—Ç—Ä–∏–º—ã", 
            views: "25", 
            duration: "23:43", 
            thumbnail: "/preview/preview3.jpg", 
            platform: "rutube", 
            url: "https://rutube.ru/video/46b92548cd13429c14348feb10dbd35d/",
            embedUrl: "https://rutube.ru/play/embed/46b92548cd13429c14348feb10dbd35d/"
          },
          { 
            id: 4, 
            title: "–ì–ï–ù–ò–ô, –†–û–ú–ê–ù, –ù–û–í–ò–ß–û–ö, –ë–´–í–ê–õ–´–ô. mortis32 –ª—É—á—à–µ–µ", 
            category: "—É–≥–∞—Ä", 
            views: "27", 
            duration: "7:38", 
            thumbnail: "/preview/preview4.jpg", 
            platform: "rutube", 
            url: "https://rutube.ru/video/ea7fa319476924cad6ae44e7972f7f7e/",
            embedUrl: "https://rutube.ru/play/embed/ea7fa319476924cad6ae44e7972f7f7e/"
          },
          { 
            id: 5, 
            title: "–í–°–ï? –í–°–ï. #3", 
            category: "–ø–æ–¥–∫–∞—Å—Ç", 
            views: "24", 
            duration: "11:08", 
            thumbnail: "/preview/preview5.jpg", 
            platform: "rutube", 
            url: "https://rutube.ru/video/baa4dc7a858f2925571dfd0791715414/",
            embedUrl: "https://rutube.ru/play/embed/baa4dc7a858f2925571dfd0791715414/"
          },
          { 
            id: 6, 
            title: "–†–ê–°–ü–ê–ö–û–í–ö–ê –ù–û–í–û–ì–û –ú–ò–ö–†–û!!!", 
            category: "–¥—Ä—É–≥–æ–µ", 
            views: "25", 
            duration: "6:45", 
            thumbnail: "/preview/preview6.jpg", 
            platform: "rutube", 
            url: "https://rutube.ru/video/72b98560f8378225efc62bb68b82cb8c/",
            embedUrl: "https://rutube.ru/play/embed/72b98560f8378225efc62bb68b82cb8c/"
          },
          { 
            id: 7, 
            title: "–ü–û–°–õ–ï–ñ–ù–ò–ô –†–£–ë–ï–ñ!", 
            category: "–ø–æ–¥–∫–∞—Å—Ç", 
            views: "6", 
            duration: "7:08", 
            thumbnail: "/preview/preview7.jpg", 
            platform: "rutube", 
            url: "https://rutube.ru/video/171e2dae98076c82e5c49f3dfda7bb33/",
            embedUrl: "https://rutube.ru/play/embed/171e2dae98076c82e5c49f3dfda7bb33/"
          },
          { 
            id: 8, 
            title: "–ö–û–ù–ï–¶ –ì–û–î–ê, –ß–¢–û –î–ê–õ–¨–®–ï", 
            category: "–ø–æ–¥–∫–∞—Å—Ç", 
            views: "30", 
            duration: "12:32", 
            thumbnail: "/preview/preview8.jpg", 
            platform: "rutube", 
            url: "https://rutube.ru/video/5b51c9a3e15b4d75bfb08783c90bcc85/",
            embedUrl: "https://rutube.ru/play/embed/5b51c9a3e15b4d75bfb08783c90bcc85/"
          },
          { 
            id: 9, 
            title: "–ù–û–í–´–ï –í–†–ï–ú–ï–ù–ê –ù–ê–ß–ò–ù–ê–Æ–¢–°–Ø –° –†–ï–õ–ê–ö–°–ê", 
            category: "—É–≥–∞—Ä", 
            views: "27", 
            duration: "24:20", 
            thumbnail: "/preview/preview9.jpg", 
            platform: "rutube", 
            url: "https://rutube.ru/video/f50e8d94d8228d9a8ffce5e37773a8e2/",
            embedUrl: "https://rutube.ru/play/embed/f50e8d94d8228d9a8ffce5e37773a8e2/"
          },
          { 
            id: 10, 
            title: "Mortisplay32 –ò–ì–†–ê–ï–¢ –í PEAK –ò –î–û–•–û–î–Ø–¢ –î–û –í–ï–†–®–ò–ù–´ (ft. Johnny_Drill, sayheyalldayman)", 
            category: "—Å—Ç—Ä–∏–º—ã", 
            views: "17", 
            duration: "1:38:14", 
            thumbnail: "/preview/preview10.jpg", 
            platform: "rutube", 
            url: "https://rutube.ru/video/4e88d1d8cacec555ddb17bff2720394a/",
            embedUrl: "https://rutube.ru/play/embed/4e88d1d8cacec555ddb17bff2720394a/"
          },
          { 
            id: 11, 
            title: "Mortisplay32 –ü–†–û–•–û–î–ò–¢ –•–û–†–†–û–† GARRY'S MOD #1 (ft. Johnny_Drill) | mortis32 –ª—É—á—à–µ–µ", 
            category: "—Å—Ç—Ä–∏–º—ã", 
            views: "12", 
            duration: "19:22", 
            thumbnail: "/preview/preview11.jpg", 
            platform: "rutube", 
            url: "https://rutube.ru/video/f81b9ced0e2d196c7024e3f4fb6b0fab/",
            embedUrl: "https://rutube.ru/play/embed/f81b9ced0e2d196c7024e3f4fb6b0fab/"
          },
          { 
            id: 12, 
            title: "Mortisplay32 –ü–†–û–•–û–î–ò–¢ –•–û–†–†–û–† GARRY'S MOD #2 (ft. Johnny_Drill) | mortis32 –ª—É—á—à–µ–µ", 
            category: "—Å—Ç—Ä–∏–º—ã", 
            views: "12", 
            duration: "18:35", 
            thumbnail: "/preview/preview12.jpg", 
            platform: "rutube", 
            url: "https://rutube.ru/video/3a968fb9c4bd5cf4dc7b3ab93174fe8e/",
            embedUrl: "https://rutube.ru/play/embed/3a968fb9c4bd5cf4dc7b3ab93174fe8e/"
          }
        ];
        
        let currentPage = 1;
        const videosPerPage = 6;
        let currentFilteredVideos = [];
        
        // –§—É–Ω–∫—Ü–∏—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –≤–∏–¥–µ–æ
        const renderVideos = (videos, page = 1, append = false) => {
          if (!append) {
            videoList.innerHTML = '';
            currentPage = page;
          }
          
          noVideosMessage.classList.add('hidden');
          loadMoreVideosContainer.classList.add('hidden');
          
          if (videos.length === 0) {
            noVideosMessage.classList.remove('hidden');
            return;
          }
          
          // –ü–∞–≥–∏–Ω–∞—Ü–∏—è
          const startIndex = (page - 1) * videosPerPage;
          const endIndex = startIndex + videosPerPage;
          const paginatedVideos = videos.slice(startIndex, endIndex);
          
          // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –≤–∏–¥–µ–æ
          paginatedVideos.forEach(video => {
            const videoElement = document.createElement('div');
            videoElement.className = 'glass-card p-4 fade-in';
            
            videoElement.innerHTML = `
              <div class="relative mb-3">
                <img src="${video.thumbnail}" alt="${video.title}" class="w-full h-40 object-cover rounded-lg cursor-pointer video-thumbnail" data-video-id="${video.id}">
                <div class="absolute bottom-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded">
                  ${video.duration}
                </div>
                <div class="absolute top-2 left-2 bg-red-500 text-white text-xs px-2 py-1 rounded">
                  <i class="fa-solid fa-play-circle"></i> Rutube
                </div>
                <div class="absolute inset-0 flex items-center justify-center">
                  <div class="w-16 h-16 bg-black/50 rounded-full flex items-center justify-center cursor-pointer play-button" data-video-id="${video.id}">
                    <i class="fa-solid fa-play text-white text-2xl"></i>
                  </div>
                </div>
              </div>
              <h3 class="font-semibold text-white mb-2 line-clamp-2">${video.title}</h3>
              <div class="flex justify-between text-sm text-gray-300">
                <span><i class="fa-solid fa-eye mr-1"></i>${video.views}</span>
                <span class="badge ${getCategoryBadgeClass(video.category)}">${getCategoryName(video.category)}</span>
              </div>
              <div class="mt-3 flex gap-2">
                <button class="neon-btn flex-1 text-center play-embed-btn" data-embed-url="${video.embedUrl}">
                  <i class="fa-solid fa-play mr-2"></i>–°–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ —Å–∞–π—Ç–µ
                </button>
                <a href="${video.url}" target="_blank" class="neon-btn bg-red-600 hover:bg-red-700 border-red-400 flex-1 text-center" onclick="trackVideoView('${video.category}', 'rutube')">
                  <i class="fa-solid fa-external-link mr-2"></i>–ù–∞ Rutube
                </a>
              </div>
              <div id="player-${video.id}" class="hidden mt-3"></div>
            `;
            
            videoList.appendChild(videoElement);
          });
          
          // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â—ë" –µ—Å–ª–∏ –µ—Å—Ç—å –µ—â–µ –≤–∏–¥–µ–æ
          const hasMoreVideos = videos.length > page * videosPerPage;
          if (hasMoreVideos) {
            loadMoreVideosContainer.classList.remove('hidden');
          }
          
          // –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –Ω–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
          setupFadeIn();
          
          // –í–ê–ñ–ù–û: –í—ã–∑—ã–≤–∞–µ–º setupVideoPlayers –ø–æ—Å–ª–µ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –≤–∏–¥–µ–æ
          setupVideoPlayers();
        };
        
        // –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–ª–∞—Å—Å–∞ –¥–ª—è –±–µ–π–¥–∂–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        const getCategoryBadgeClass = (category) => {
          const classes = {
            '—É–≥–∞—Ä': 'common',
            '—Å—Ç—Ä–∏–º—ã': 'rare',
            '–ø–æ–¥–∫–∞—Å—Ç': 'legendary',
            '–¥—Ä—É–≥–æ–µ': 'secret'
          };
          return classes[category] || 'common';
        };
        
        // –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        const getCategoryName = (category) => {
          const names = {
            '—É–≥–∞—Ä': '–£–≥–∞—Ä',
            '—Å—Ç—Ä–∏–º—ã': '–°—Ç—Ä–∏–º—ã',
            '–ø–æ–¥–∫–∞—Å—Ç': '–ü–æ–¥–∫–∞—Å—Ç',
            '–¥—Ä—É–≥–æ–µ': '–î—Ä—É–≥–æ–µ'
          };
          return names[category] || category;
        };
        
        // –§—É–Ω–∫—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ
        const filterVideos = () => {
          const searchTerm = videoSearch.value.toLowerCase();
          const selectedCategory = categoryFilter.value;
          
          currentFilteredVideos = allVideoData.filter(video => {
            const matchesSearch = video.title.toLowerCase().includes(searchTerm);
            const matchesCategory = selectedCategory === 'all' || video.category === selectedCategory;
            return matchesSearch && matchesCategory;
          });
          
          return currentFilteredVideos;
        };
        
        // –§—É–Ω–∫—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –≤–∏–¥–µ–æ
        const filterAndRenderVideos = () => {
          const filteredVideos = filterVideos();
          renderVideos(filteredVideos, 1);
        };
        
        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –≤–∏–¥–µ–æ
        const loadMoreVideosHandler = () => {
          currentPage++;
          renderVideos(currentFilteredVideos, currentPage, true);
        };
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        videoSearch.addEventListener('input', debounce(() => {
          filterAndRenderVideos();
        }, 300));
        
        categoryFilter.addEventListener('change', () => {
          filterAndRenderVideos();
        });
        
        resetFilters.addEventListener('click', () => {
          videoSearch.value = '';
          categoryFilter.value = 'all';
          filterAndRenderVideos();
        });
        
        loadMoreVideos.addEventListener('click', loadMoreVideosHandler);
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
        document.querySelectorAll('.category-card').forEach(card => {
          card.addEventListener('click', () => {
            const category = card.getAttribute('data-category');
            categoryFilter.value = category;
            filterAndRenderVideos();
          });
        });
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–µ 6 –≤–∏–¥–µ–æ
        currentFilteredVideos = allVideoData;
        renderVideos(allVideoData, 1);
      };

      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –≤–∏–¥–µ–æ
      window.trackVideoView = (category, platform) => {
        // –û–±—â–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã –≤–∏–¥–µ–æ
        let videoViews = parseInt(localStorage.getItem('video_views') || '0');
        videoViews++;
        localStorage.setItem('video_views', videoViews.toString());
        
        // –ü—Ä–æ—Å–º–æ—Ç—Ä—ã Rutube (–≤—Å–µ –≤–∏–¥–µ–æ —Ç–µ–ø–µ—Ä—å —Å Rutube)
        let rutubeViews = parseInt(localStorage.getItem('rutube_views') || '0');
        rutubeViews++;
        localStorage.setItem('rutube_views', rutubeViews.toString());
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ª–æ–≤–∏—è –¥–ª—è –±–µ–π–¥–∂–µ–π
        checkBadgeConditions();
        
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–±—ã—Ç–∏–µ –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫—É
        gtag('event', 'video_play', {
          event_category: 'video',
          event_label: `${category}_rutube`
        });
      };

      const setupNavigation = () => {
        const menuToggle = document.getElementById('menuToggle');
        const sidebarMenu = document.getElementById('sidebarMenu');
        const closeMenu = document.getElementById('closeMenu');
        if (menuToggle && sidebarMenu && closeMenu) {
          menuToggle.addEventListener('click', () => {
            sidebarMenu.classList.toggle('open');
            menuToggle.setAttribute('aria-expanded', sidebarMenu.classList.contains('open'));
            gtag('event', 'menu_toggle', { event_category: 'navigation', event_label: sidebarMenu.classList.contains('open') ? 'open' : 'close' });
            logAction(`–ú–µ–Ω—é: ${sidebarMenu.classList.contains('open') ? '–û—Ç–∫—Ä—ã—Ç–æ' : '–ó–∞–∫—Ä—ã—Ç–æ'}`);
          });
          closeMenu.addEventListener('click', () => {
            sidebarMenu.classList.remove('open');
            menuToggle.setAttribute('aria-expanded', 'false');
            gtag('event', 'menu_close', { event_category: 'navigation', event_label: 'close' });
            logAction('–ú–µ–Ω—é –∑–∞–∫—Ä—ã—Ç–æ');
          });
        }
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
          anchor.addEventListener('click', (e) => {
            e.preventDefault();
            const targetId = anchor.getAttribute('href').substring(1);
            const target = document.getElementById(targetId);
            if (target) {
              target.scrollIntoView({ behavior: 'smooth' });
              gtag('event', 'nav_click', { event_category: 'navigation', event_label: targetId });
              logAction(`–ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–µ–∫—Ü–∏–∏: ${targetId}`);
            }
            if (sidebarMenu && sidebarMenu.classList.contains('open')) {
              sidebarMenu.classList.remove('open');
              menuToggle.setAttribute('aria-expanded', 'false');
            }
          });
        });
      };

      const setupParticles = () => {
        const canvas = document.getElementById('backgroundParticles');
        if (!canvas) return;
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        const particles = [];
        const particleCount = Math.floor(window.innerWidth / 20);
        for (let i = 0; i < particleCount; i++) {
          particles.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            size: Math.random() * 3 + 1,
            speedX: Math.random() * 0.5 - 0.25,
            speedY: Math.random() * 0.5 - 0.25
          });
        }
        const animateParticles = () => {
          if (root.classList.contains('no-particles') || root.classList.contains('low-performance')) return;
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          particles.forEach(p => {
            p.x += p.speedX;
            p.y += p.speedY;
            if (p.x < 0 || p.x > canvas.width) p.speedX *= -1;
            if (p.y < 0 || p.y > canvas.height) p.speedY *= -1;
            ctx.beginPath();
            ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
            ctx.fillStyle = root.classList.contains('dark') ? '#e5e7eb' : '#1f2937';
            ctx.fill();
          });
          requestAnimationFrame(animateParticles);
        };
        window.addEventListener('resize', () => {
          canvas.width = window.innerWidth;
          canvas.height = window.innerHeight;
        });
        animateParticles();
      };

      const setupFadeIn = () => {
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('visible');
              observer.unobserve(entry.target);
            }
          });
        }, { threshold: 0.1 });
        document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
      };

      const setupVideoErrorHandling = () => {
        const video = document.querySelector('.banner-video');
        if (video) {
          video.addEventListener('error', () => {
            const fallbackImg = video.nextElementSibling;
            if (fallbackImg) {
              video.classList.add('hidden');
              fallbackImg.classList.remove('hidden');
              logAction('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ –≤ –±–∞–Ω–Ω–µ—Ä–µ');
            }
          });
        }
      };

      // === –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ===
      document.addEventListener('DOMContentLoaded', () => {
        setupLoader(); // –ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∑–∞–≥—Ä—É–∑—á–∏–∫
        setupProfileBetaNotice();
        setupThemeToggle();
        setupThemeSelect();
        setupPerformance();
        setupAnimations();
        setupParticleToggle();
        setupAdvancedPerformance();
        setupSettingsNotifications(); // –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞—Å—Ç—Ä–æ–µ–∫
        setupAccessibility();
        setupFontSize();
        setupHighContrast();
        setupResetSettings();
        setupResetProfile();
        setupProfile();
        setupNews();
        setupNavigation();
        setupParticles();
        setupFadeIn();
        setupVideoErrorHandling();
        setupBadges();
        setupSecretBadgeTrigger();
        setupGhostGesture();
        setupVideoSearchAndFilter();
      });
    </script>
  </div>
</body>
</html>
