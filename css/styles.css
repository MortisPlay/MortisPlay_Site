@keyframes floaty { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-4px); } }
@keyframes spin { 100% { transform: rotate(360deg); } }

:root { --font-scale: 1; }
body { font-size: calc(1rem * var(--font-scale)); overscroll-behavior: none; }
main { overflow: auto; min-height: 100vh; }

.fade-in { opacity: 0; transform: translateY(16px); transition: opacity .6s ease, transform .6s ease; will-change: opacity, transform; }
.fade-in.is-visible { opacity: 1; transform: none; }
.card-hover { transition: transform .25s ease, box-shadow .25s ease; }
.card-hover:hover { transform: translateY(-4px); box-shadow: 0 12px 24px rgba(0, 0, 0, .15); }

.glass { backdrop-filter: blur(8px); background: linear-gradient(180deg, rgba(255, 255, 255, .7), rgba(255, 255, 255, .55)); }
.dark .glass { background: linear-gradient(180deg, rgba(17, 24, 39, .7), rgba(17, 24, 39, .55)); }
@supports not (backdrop-filter: blur(8px)) { 
  .glass { background: rgba(255, 255, 255, .9); } 
  .dark .glass { background: rgba(17, 24, 39, .9); } 
}

.glass-button { 
  background: rgba(255, 255, 255, .15); 
  backdrop-filter: blur(10px); 
  border: 1px solid rgba(255, 255, 255, .3); 
  border-radius: .75rem; 
  color: #fff; 
  font-weight: 600; 
  padding: .5rem 1rem; 
  box-shadow: 0 4px 6px rgba(0, 0, 0, .1), 0 1px 3px rgba(0, 0, 0, .08); 
  transition: all .3s ease; 
  cursor: pointer; 
  display: inline-flex; 
  align-items: center; 
  gap: .5rem; 
}
.glass-button:hover { 
  background: rgba(255, 255, 255, .25); 
  transform: scale(1.05); 
  box-shadow: 0 6px 12px rgba(0, 0, 0, .15); 
}
.glass-button:active { 
  transform: scale(.95); 
  box-shadow: 0 2px 4px rgba(0, 0, 0, .1); 
}
.glass-button:focus-visible { 
  outline: 3px solid #6366f1; 
  outline-offset: 2px; 
}
.dark .glass-button { 
  background: rgba(50, 50, 50, .15); 
  border-color: rgba(200, 200, 200, .2); 
  color: #e5e7eb; 
}
.dark .glass-button:hover { 
  background: rgba(50, 50, 50, .25); 
}
.dark .glass-button:focus-visible { 
  outline-color: #a5b4fc; 
}
@supports not (backdrop-filter: blur(10px)) { 
  .glass-button { background: rgba(255, 255, 255, .5); box-shadow: none; } 
  .dark .glass-button { background: rgba(50, 50, 50, .5); } 
}

.notification { 
  display: none; 
  background: rgba(255, 255, 255, .9); 
  color: #1f2937; 
  border: 1px solid rgba(0, 0, 0, .2); 
  border-radius: .5rem; 
  padding: .75rem 1rem; 
  margin-top: 1rem; 
  box-shadow: 0 4px 6px rgba(0, 0, 0, .1); 
  position: relative; 
  transition: opacity .3s ease, transform .3s ease; 
}
.notification.show { 
  display: flex; 
  align-items: center; 
  gap: 1rem; 
  opacity: 1; 
  transform: translateY(0); 
}
.dark .notification { 
  background: rgba(17, 24, 39, .9); 
  color: #e5e7eb; 
  border-color: rgba(255, 255, 255, .2); 
}
.notification button { 
  background: none; 
  border: none; 
  color: #1f2937; 
  cursor: pointer; 
  font-size: 1rem; 
  padding: .25rem; 
  transition: color .3s ease; 
}
.dark .notification button { 
  color: #e5e7eb; 
}
.notification button:hover { 
  color: #6366f1; 
}
.dark .notification button:hover { 
  color: #a5b4fc; 
}
#settings .notification { 
  position: fixed; 
  bottom: 1rem; 
  right: 1rem; 
  margin-top: 0; 
  z-index: 1000; 
  max-width: 320px; 
}

#loader { 
  position: fixed; 
  inset: 0; 
  z-index: 1000; 
  display: flex; 
  align-items: center; 
  justify-content: center; 
}
.loader-spin { 
  width: 64px; 
  height: 64px; 
  border: 6px solid rgba(255, 255, 255, .3); 
  border-top-color: #fff; 
  border-radius: 50%; 
  animation: spin 1s linear infinite; 
}

#sidebarMenu { 
  box-shadow: 2px 0 5px rgba(0, 0, 0, .1); 
  transform: translateX(-100%); 
  transition: transform .3s ease-in-out; 
}
#sidebarMenu.open { 
  transform: translateX(0); 
}

#themeToggle { 
  position: relative; 
  overflow: hidden; 
  background: linear-gradient(45deg, #facc15, #fef08a); 
  border-radius: .75rem; 
  padding: .5rem; 
}
#themeToggle.dark { 
  background: linear-gradient(45deg, #1e3a8a, #3b82f6); 
}
#themeToggle::before { 
  content: ''; 
  position: absolute; 
  top: 50%; 
  left: 50%; 
  width: 0; 
  height: 0; 
  background: rgba(255, 255, 255, .4); 
  border-radius: 50%; 
  transform: translate(-50%, -50%); 
  transition: width .5s ease, height .5s ease; 
}
#themeToggle:hover::before { 
  width: 200%; 
  height: 200%; 
}
#themeToggle i { 
  transition: transform .5s ease, opacity .5s ease; 
  position: relative; 
  z-index: 1; 
}
#themeToggle:hover i { 
  transform: rotate(180deg); 
  opacity: .8; 
}
#themeToggle .glow { 
  position: absolute; 
  inset: 0; 
  box-shadow: 0 0 12px rgba(255, 255, 255, .6); 
  opacity: 0; 
  transition: opacity .3s ease; 
}
#themeToggle:hover .glow { 
  opacity: 1; 
}
.dark #themeToggle .glow { 
  box-shadow: 0 0 12px rgba(99, 102, 241, .6); 
}
.particle { 
  position: absolute; 
  width: 4px; 
  height: 4px; 
  background: #fff; 
  border-radius: 50%; 
  pointer-events: none; 
  z-index: 2; 
}
.dark .particle { 
  background: #6366f1; 
}

.video-filter { 
  transition: all .3s ease; 
}
.video-filter.active { 
  background: rgba(99, 102, 241, .3); 
  transform: scale(1.05); 
}
.dark .video-filter.active { 
  background: rgba(99, 102, 241, .5); 
}
.video-card { 
  transition: opacity .3s ease, transform .3s ease; 
}
.video-card.hidden { 
  opacity: 0; 
  transform: scale(.95); 
  display: none; 
}

.low-performance .card-hover, .no-animations .card-hover { 
  transition: none; 
}
.low-performance .card-hover:hover, .no-animations .card-hover:hover { 
  transform: none; 
  box-shadow: none; 
}
.low-performance .fade-in, .no-animations .fade-in { 
  transition: none; 
  opacity: 1; 
  transform: none; 
}
.low-performance .animate-[floaty_5s_ease-in-out_infinite], 
.no-animations .animate-[floaty_5s_ease-in-out_infinite] { 
  animation: none; 
}
.low-performance #videos, .low-performance .banner-video, .low-performance .banner-quote { 
  display: none; 
}
.banner-fallback { 
  display: none; 
}
.low-performance .banner-fallback { 
  display: block; 
}

.high-contrast { 
  --text-color: #000; 
  --bg-color: #fff; 
  --link-color: #00f; 
}
.high-contrast.dark { 
  --text-color: #fff; 
  --bg-color: #000; 
  --link-color: #0f0; 
}
.high-contrast body { 
  background: var(--bg-color); 
  color: var(--text-color); 
}
.high-contrast a { 
  color: var(--link-color); 
  text-decoration: underline; 
}
.high-contrast .bg-gradient-to-br, 
.high-contrast .glass, 
.high-contrast .glass-button, 
.high-contrast .card-hover { 
  background: var(--bg-color); 
  backdrop-filter: none; 
  border-color: var(--text-color); 
  color: var(--text-color); 
}
.high-contrast .video-filter.active { 
  background: var(--text-color); 
  color: var(--bg-color); 
}
.high-contrast .bg-gradient-to-r { 
  background: var(--bg-color); 
  color: var(--text-color); 
}
.high-contrast .text-transparent { 
  color: var(--text-color); 
}
.high-contrast .ring-1 { 
  border-color: var(--text-color); 
}
.high-contrast .notification { 
  background: var(--bg-color); 
  color: var(--text-color); 
  border-color: var(--text-color); 
}
.high-contrast .notification button { 
  color: var(--text-color); 
}

.text-3xl { font-size: calc(1.875rem * var(--font-scale)); }
.text-2xl { font-size: calc(1.5rem * var(--font-scale)); }
.text-sm { font-size: calc(.875rem * var(--font-scale)); }

@media (max-width: 640px) { 
  #welcome .lg:grid-cols-2 { grid-template-columns: 1fr; }
  #welcome video, #welcome .banner-fallback { max-width: 100%; height: auto; }
  #welcome .mt-4.lg\:absolute { position: static; margin-top: 1rem; width: 100%; }
  #menuToggle { padding: .5rem .75rem; font-size: 1rem; }
  .glass { backdrop-filter: none; background: linear-gradient(180deg, rgba(255, 255, 255, .9), rgba(255, 255, 255, .8)); }
  .dark .glass { background: linear-gradient(180deg, rgba(17, 24, 39, .9), rgba(17, 24, 39, .8)); }
  .card-hover:hover { transform: none; }
  .animate-[floaty_5s_ease-in-out_infinite] { animation: none; }
  iframe, video, img { max-width: 100%; height: auto; }
  .glass-button { padding: .5rem 1rem; }
  #settings .notification { max-width: 80%; right: .5rem; bottom: .5rem; }
}

@media (min-width: 1024px) {
  header { position: sticky; top: 0; z-index: 50; background: rgba(255, 255, 255, .8); }
  .dark header { background: rgba(30, 41, 59, .8); }
  nav { height: 4rem; }
  nav a { padding: .75rem 1rem; }
  nav a:hover { background: rgba(241, 245, 249, 1); }
  .dark nav a:hover { background: rgba(51, 65, 85, 1); }
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
}
